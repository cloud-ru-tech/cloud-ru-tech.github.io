import{j as u}from"./jsx-runtime-BTJTZTIL.js";import{c as V}from"./index-DUmpqB7p.js";import{r as c}from"./index-CJ_LmFaV.js";import{S as R}from"./Skeleton-Cf0sBfNU.js";import{T as w}from"./Tooltip-DzAF_V2U.js";import{D as z}from"./DropList-Be0cOCb8.js";import{B as q}from"./ButtonSimple-CpxdojdF.js";import{T as $}from"./Tag-BEBGOq3Q.js";import{K as T}from"./index-B80hK4m0.js";import{f as A,i as M}from"./styles.module-BT1-uCQm.js";import{S as y}from"./SkeletonText-DP-re6Ou.js";import{I as L}from"./index-CGvnlMjz.js";import{e as O}from"./componentPropsProcessors-UJEZy8aQ.js";import{T as F}from"./Typography-DmSN6cv6.js";import{u as W}from"./helpers-DYkURdBT.js";import{C as G,a as U}from"./index-DreyRvUE.js";import{B as I}from"./ButtonFunction-IUEJSlMa.js";import{T as K}from"./TruncateString-D54BiV_x.js";import{S as J}from"./SegmentedControl-Do4C4R6e.js";import{S as Q}from"./Scroll-CyeY1SIb.js";import{W as X}from"./WithSkeleton-BvFnKWIX.js";const l={title:"notification-panel__title",segments:"notification-panel__segments",settings:{droplist:"notification-panel__settings__droplist",droplistTrigger:"notification-panel__settings__droplist-trigger",droplistAction:"notification-panel__settings__droplist-action"},readAll:"notification-panel__readAll",footerButton:"notification-panel__footerButton",skeleton:"notification-panel__skeleton",cardStack:{headline:"notification-panel__card-stack__headline",wrapper:"notification-panel__card-stack__wrapper",title:"notification-panel__card-stack__title",openButton:"notification-panel__card-stack__open-button"}};function Y(){return u.jsxs("div",{className:A.notificationCard,"data-test-id":l.skeleton,"data-skeleton":!0,children:[u.jsx(y,{width:140,typography:"label-s",lines:1}),u.jsxs("div",{className:A.notificationCardTitle,"data-center":!0,children:[u.jsx("div",{className:A.notificationCardTitleIcon,children:u.jsx(y,{width:16,typography:"title-s",lines:1})}),u.jsx(y,{width:140,typography:"title-s",lines:1})]}),u.jsx("div",{className:A.notificationCardContent,children:u.jsx(y,{lines:3,typography:"body-s"})}),u.jsxs("div",{className:A.notificationCardFooter,children:[u.jsx(y,{width:140,typography:"body-s",lines:1}),u.jsx(y,{width:140,typography:"label-s",lines:1})]})]})}function D({actions:e,button:t}){const[n,a]=c.useState(!1);return u.jsx(z,{trigger:"clickAndFocusVisible",open:n,onOpenChange:a,scroll:!0,placement:"bottom-end","data-test-id":l.settings.droplist,items:e.map(({icon:i,content:f,tagLabel:o,disabled:s,onClick:r})=>({onClick:B=>{a(!1),r==null||r(B)},disabled:s,content:f,beforeContent:i,afterContent:o?u.jsx($,{label:o}):void 0,"data-test-id":l.settings.droplistAction})),children:u.jsx(q,{...t})})}try{D.displayName="NotificationPanelSettingsDroplist",D.__docgenInfo={description:"",displayName:"NotificationPanelSettingsDroplist",props:{actions:{defaultValue:null,description:"",name:"actions",required:!0,type:{name:"Action[]"}},button:{defaultValue:null,description:"",name:"button",required:!0,type:{name:"ButtonSimpleProps"}}}}}catch{}function j({actions:e,button:t}){const n={...t,size:"s",icon:t.icon||u.jsx(T,{}),"data-test-id":l.settings.droplistTrigger};return e!=null&&e.length?u.jsx(D,{actions:e,button:n}):u.jsx(q,{...n})}try{j.displayName="NotificationPanelSettings",j.__docgenInfo={description:"",displayName:"NotificationPanelSettings",props:{actions:{defaultValue:null,description:"Дополнительные действия панели",name:"actions",required:!1,type:{name:"Action[]"}},button:{defaultValue:null,description:"Кнопка дополнительного действия панели",name:"button",required:!0,type:{name:'Omit<ButtonSimpleProps, "data-test-id" | "size" | "label" | "type">'}}}}}catch{}const Z="_notificationPanelBlank_16cox_1",uu={notificationPanelBlank:Z};function P({icon:e,className:t,...n}){return u.jsx(u.Fragment,{children:u.jsx(L,{...n,icon:e?{...e,appearance:e.appearance??"neutral"}:void 0,size:"l",align:"vertical",className:V(uu.notificationPanelBlank,t)})})}try{P.displayName="NotificationPanelBlank",P.__docgenInfo={description:'Компонента для "заглушки" вместо карточек в панели',displayName:"NotificationPanelBlank",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"Заголовок",name:"title",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"Подзаголовок",name:"description",required:!1,type:{name:"ReactNode"}},icon:{defaultValue:null,description:"Иконка",name:"icon",required:!1,type:{name:'Pick<IconPredefinedProps, "icon" | "appearance" | "decor">'}}}}}catch{}const eu="_container_12er6_1",tu="_animationContainer_12er6_6",nu="_card_12er6_19",N={container:eu,animationContainer:tu,card:nu};function C({open:e,count:t}){return u.jsx("div",{className:N.container,"data-open":e||void 0,children:u.jsxs("div",{className:N.animationContainer,children:[t>1&&u.jsx("div",{className:N.card,"data-level":"3"}),u.jsx("div",{className:N.card,"data-level":"2"})]})})}try{C.displayName="StackTail",C.__docgenInfo={description:"",displayName:"StackTail",props:{open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},count:{defaultValue:null,description:"",name:"count",required:!0,type:{name:"number"}}}}}catch{}function au({defaultOpen:e=!1,onOpenChanged:t,duration:n}){const[a,i]=W(void 0,e,t),[f,o]=c.useState(a),s=c.useRef(),r=c.useCallback(()=>{i(!a)},[a,i]);return c.useEffect(()=>{clearTimeout(s.current),a?o(!0):s.current=setTimeout(()=>{o(!1)},n)},[a,n]),{toggleOpen:r,open:a,isVisible:f}}const iu="_container_14e70_1",ou="_header_14e70_7",su="_title_14e70_16",lu="_right_14e70_30",ru="_first_14e70_38",cu="_stack_14e70_43",du="_animationContainer_14e70_60",p={container:iu,header:ou,title:su,right:lu,first:ru,stack:cu,animationContainer:du},pu=(e,t)=>c.isValidElement(e)?c.cloneElement(e,{...e.props,...t}):e,v=.3;function k({children:e,defaultOpen:t,onOpenChanged:n,title:a,actions:i}){const[f,o]=c.useState(!1),{open:s,toggleOpen:r,isVisible:B}=au({defaultOpen:t,onOpenChanged:n,duration:v*1e3}),[_,...E]=c.useMemo(()=>c.Children.toArray(e),[e]);if(!_)return null;if(!E.length)return u.jsx(u.Fragment,{children:_});const x=s?_:pu(_,{onClick:r});return u.jsxs("div",{className:p.container,style:{"--snack-notification-stack-animation-duration":`${v}s`},"data-test-id":l.cardStack.wrapper,children:[u.jsxs("div",{className:p.header,"data-test-id":l.cardStack.headline,children:[u.jsx("label",{className:p.title,onClick:r,"data-test-id":l.cardStack.title,children:a}),u.jsxs("div",{className:p.right,children:[i&&i.length>0&&u.jsx(M,{actions:i,open:f,setDroplistOpen:o,size:"xs",icon:u.jsx(T,{})}),u.jsx(I,{size:"xs",onClick:r,"data-test-id":l.cardStack.openButton,icon:s?u.jsx(G,{}):u.jsx(U,{})})]})]}),u.jsxs("div",{className:p.cards,children:[u.jsxs("div",{className:p.first,children:[u.jsx(C,{open:s,count:E.length}),x]}),u.jsx("div",{className:p.stack,"data-open":s||void 0,"data-tail-size":E.length,children:u.jsx("div",{className:p.animationContainer,children:B?E:[]})})]})]})}try{k.displayName="NotificationCardStack",k.__docgenInfo={description:"",displayName:"NotificationCardStack",props:{title:{defaultValue:null,description:"Заголовок стопки карточек",name:"title",required:!0,type:{name:"string"}},defaultOpen:{defaultValue:{value:"false"},description:"Состояние открыт/закрыт по умолчанию",name:"defaultOpen",required:!1,type:{name:"boolean"}},onOpenChanged:{defaultValue:null,description:"Колбек смены состояния открыт/закрыт",name:"onOpenChanged",required:!1,type:{name:"(open: boolean) => void"}},children:{defaultValue:null,description:"Карточки в стопке, видна первая карточка, остальные схлопываются под нее.",name:"children",required:!0,type:{name:"Iterable<ReactNode>"}},actions:{defaultValue:null,description:"Список действий в выпадающем меню",name:"actions",required:!1,type:{name:"Action[]"}}}}}catch{}const mu="_container_g5so0_1",fu="_text_g5so0_8",_u="_line_g5so0_14",h={container:mu,text:fu,line:_u};function S({text:e,className:t,...n}){return u.jsxs("div",{className:V(h.container,t),...O(n),children:[u.jsx("div",{className:h.line}),u.jsx(F.LightLabelS,{className:h.text,children:e}),u.jsx("div",{className:h.line})]})}try{S.displayName="NotificationPanelDivider",S.__docgenInfo={description:"Разделитель для группировки или разделения карточек в списке",displayName:"NotificationPanelDivider",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},text:{defaultValue:null,description:"Текст разделителя",name:"text",required:!0,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}function b({tooltip:e,children:t}){return e?u.jsx(w,{...e,children:t}):t}try{b.displayName="WithTooltip",b.__docgenInfo={description:"",displayName:"WithTooltip",props:{tooltip:{defaultValue:null,description:"",name:"tooltip",required:!1,type:{name:"TooltipProps"}}}}}catch{}const Eu="_notificationPanelHeader_1usub_1",yu="_notificationPanelHeadline_1usub_22",Bu="_notificationPanelTitle_1usub_29",gu="_notificationPanelBody_1usub_34",Au="_notificationPanelFooterButton_1usub_46",Nu="_wrapper_1usub_84",hu="_scrollStub_1usub_93",xu="_notificationPanelHeaderActions_1usub_99",m={notificationPanelHeader:Eu,notificationPanelHeadline:yu,notificationPanelTitle:Bu,notificationPanelBody:gu,notificationPanelFooterButton:Au,wrapper:Nu,scrollStub:hu,notificationPanelHeaderActions:xu};function d({title:e,settings:t,segments:n,readAllButton:a,footerButton:i,content:f,loading:o,skeletonsAmount:s=2,scrollEndRef:r,scrollContainerRef:B,className:_,...E}){const x=c.useMemo(()=>Array.from({length:s},(g,H)=>H),[s]);return u.jsxs("div",{className:V(m.wrapper,_),...O(E),children:[u.jsxs("div",{className:m.notificationPanelHeader,children:[u.jsxs("div",{className:m.notificationPanelHeadline,children:[u.jsx(F.SansHeadlineS,{className:m.notificationPanelTitle,children:u.jsx(K,{text:e,"data-test-id":l.title})}),u.jsxs("div",{className:m.notificationPanelHeaderActions,children:[a&&u.jsx(b,{tooltip:a.tooltip,children:u.jsx(I,{...a,onClick:a.onClick,size:"xs",disabled:a.disabled||o,"data-test-id":l.readAll})}),t&&u.jsx(j,{...t})]})]}),u.jsx("div",{children:n&&u.jsx(J,{...n,size:"s",items:n.items.map(g=>({...g,disabled:g.disabled||o})),"data-test-id":l.segments})})]}),u.jsx(Q,{size:"m",ref:B,children:u.jsxs("div",{className:m.notificationPanelBody,children:[f,o&&u.jsx(R,{loading:o||!1,children:x.map(g=>u.jsx(X,{skeleton:u.jsx(Y,{})},g))}),u.jsx("div",{className:m.scrollStub,ref:r})]})}),i&&u.jsx("button",{type:"button",onClick:i.onClick,className:m.notificationPanelFooterButton,"data-test-id":l.footerButton,children:u.jsx(F.SansLabelS,{children:i.label})})]})}(e=>{e.Blank=P,e.Divider=S,e.Stack=k})(d||(d={}));try{d.displayName="NotificationPanel",d.__docgenInfo={description:"Компонент панели для уведомлений",displayName:"NotificationPanel",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"Заголовок панели",name:"title",required:!0,type:{name:"string"}},settings:{defaultValue:null,description:"Кнопка настроек и выпадающий список",name:"settings",required:!1,type:{name:"NotificationPanelSettingsProps"}},segments:{defaultValue:null,description:"Сегменты для фильтрации",name:"segments",required:!1,type:{name:'Omit<SegmentedControlProps, "data-test-id" | "size">'}},readAllButton:{defaultValue:null,description:'Кнопка в "шапке" панели',name:"readAllButton",required:!1,type:{name:'(Omit<ButtonFunctionProps, "data-test-id"> & { tooltip?: TooltipProps; })'}},footerButton:{defaultValue:null,description:"Кнопка внизу панели",name:"footerButton",required:!1,type:{name:"{ label: string; onClick: MouseEventHandler<HTMLButtonElement>; }"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},loading:{defaultValue:null,description:"Состояние загрузки",name:"loading",required:!1,type:{name:"boolean"}},content:{defaultValue:null,description:"Контент для отрисовки (e.g NotificationCard | NotificationPanel.Blank)",name:"content",required:!1,type:{name:"ReactNode"}},skeletonsAmount:{defaultValue:{value:"2"},description:"Количество скелетонов карточек для отображения при загрузке",name:"skeletonsAmount",required:!1,type:{name:"number"}},scrollEndRef:{defaultValue:null,description:"Ссылка на элемент, обозначающий самый конец прокручиваемого списка",name:"scrollEndRef",required:!1,type:{name:"RefObject<HTMLDivElement>"}},scrollContainerRef:{defaultValue:null,description:"Ссылка на контейнер, который скроллится",name:"scrollContainerRef",required:!1,type:{name:"RefObject<HTMLElement>"}}}}}catch{}try{d.Blank.displayName="NotificationPanel.Blank",d.Blank.__docgenInfo={description:"",displayName:"NotificationPanel.Blank",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"Заголовок",name:"title",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"Подзаголовок",name:"description",required:!1,type:{name:"ReactNode"}},icon:{defaultValue:null,description:"Иконка",name:"icon",required:!1,type:{name:'Pick<IconPredefinedProps, "icon" | "appearance" | "decor">'}}}}}catch{}try{d.Divider.displayName="NotificationPanel.Divider",d.Divider.__docgenInfo={description:"",displayName:"NotificationPanel.Divider",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},text:{defaultValue:null,description:"Текст разделителя",name:"text",required:!0,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}try{d.Stack.displayName="NotificationPanel.Stack",d.Stack.__docgenInfo={description:"",displayName:"NotificationPanel.Stack",props:{title:{defaultValue:null,description:"Заголовок стопки карточек",name:"title",required:!0,type:{name:"string"}},defaultOpen:{defaultValue:{value:"false"},description:"Состояние открыт/закрыт по умолчанию",name:"defaultOpen",required:!1,type:{name:"boolean"}},onOpenChanged:{defaultValue:null,description:"Колбек смены состояния открыт/закрыт",name:"onOpenChanged",required:!1,type:{name:"(open: boolean) => void"}},children:{defaultValue:null,description:"Карточки в стопке, видна первая карточка, остальные схлопываются под нее.",name:"children",required:!0,type:{name:"Iterable<ReactNode>"}},actions:{defaultValue:null,description:"Список действий в выпадающем меню",name:"actions",required:!1,type:{name:"Action[]"}}}}}catch{}export{d as N};
