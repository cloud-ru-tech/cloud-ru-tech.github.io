import{r as d}from"./index-CJ_LmFaV.js";import{j as h}from"./jsx-runtime-BTJTZTIL.js";import{g as R}from"./hooks-vOdLYvor.js";import{C as se}from"./index-Y3TRpJ-L.js";import{u as $}from"./LocaleProvider-DhC1J63f.js";import{D as V}from"./Divider-C1X9zrkx.js";import{B as ne}from"./ButtonFunction-BNj4ztGa.js";import{B as re}from"./ButtonFilled-BPNiFYIg.js";import{i as ae}from"./isBrowser-C2N6XvuH.js";import{L as oe}from"./List-Cy264X3z.js";import{e as ie}from"./componentPropsProcessors-UJEZy8aQ.js";const H={Month:"month",Year:"year",Decade:"decade"},G={Date:"date",DateTime:"date-time",Range:"range",Month:"month",Year:"year"},B={Out:"out",Start:"start",In:"in",End:"end",StartEnd:"start-end"},ce={S:"s",M:"m",L:"l"},Ue={[H.Month]:{rows:6,columns:7},[H.Year]:{rows:4,columns:3},[H.Decade]:{rows:4,columns:3}},le="autofocus",ue=24,de=60,fe=60,ze=new Intl.Locale("ru-RU");function me(e,t){var n=t[typeof e=="string"?e.toUpperCase():e];return typeof n=="number"?n:1}function ge(e,t,n){if(e){var o=e.toLowerCase().split(/[-_]/),f=o[0],i=f,r;if(o[1]&&o[1].length===4?(i+="_"+o[1],r=o[2]):r=o[1],r||(r=t[i]||t[f]),r)return me(r.match(/^\d+$/)?Number(r):r,n)}return 1}var he={en:"US",hi:"IN",deva:"IN",te:"IN",mr:"IN",ta:"IN",gu:"IN",kn:"IN",or:"IN",ml:"IN",pa:"IN",bho:"IN",awa:"IN",as:"IN",mwr:"IN",mai:"IN",mag:"IN",bgc:"IN",hne:"IN",dcc:"IN",bn:"BD",beng:"BD",rkt:"BD",dz:"BT",tibt:"BT",tn:"BW",am:"ET",ethi:"ET",om:"ET",quc:"GT",id:"ID",jv:"ID",su:"ID",mad:"ID",ms_arab:"ID",he:"IL",hebr:"IL",jam:"JM",ja:"JP",jpan:"JP",km:"KH",khmr:"KH",ko:"KR",kore:"KR",lo:"LA",laoo:"LA",mh:"MH",my:"MM",mymr:"MM",mt:"MT",ne:"NP",fil:"PH",ceb:"PH",ilo:"PH",ur:"PK",pa_arab:"PK",lah:"PK",ps:"PK",sd:"PK",skr:"PK",gn:"PY",th:"TH",thai:"TH",tts:"TH",zh_hant:"TW",hant:"TW",sm:"WS",zu:"ZA",sn:"ZW",arq:"DZ",ar:"EG",arab:"EG",arz:"EG",fa:"IR",az_arab:"IR",dv:"MV",thaa:"MV"},pe={AG:0,ATG:0,28:0,AS:0,ASM:0,16:0,BD:0,BGD:0,50:0,BR:0,BRA:0,76:0,BS:0,BHS:0,44:0,BT:0,BTN:0,64:0,BW:0,BWA:0,72:0,BZ:0,BLZ:0,84:0,CA:0,CAN:0,124:0,CO:0,COL:0,170:0,DM:0,DMA:0,212:0,DO:0,DOM:0,214:0,ET:0,ETH:0,231:0,GT:0,GTM:0,320:0,GU:0,GUM:0,316:0,HK:0,HKG:0,344:0,HN:0,HND:0,340:0,ID:0,IDN:0,360:0,IL:0,ISR:0,376:0,IN:0,IND:0,356:0,JM:0,JAM:0,388:0,JP:0,JPN:0,392:0,KE:0,KEN:0,404:0,KH:0,KHM:0,116:0,KR:0,KOR:0,410:0,LA:0,LA0:0,418:0,MH:0,MHL:0,584:0,MM:0,MMR:0,104:0,MO:0,MAC:0,446:0,MT:0,MLT:0,470:0,MX:0,MEX:0,484:0,MZ:0,MOZ:0,508:0,NI:0,NIC:0,558:0,NP:0,NPL:0,524:0,PA:0,PAN:0,591:0,PE:0,PER:0,604:0,PH:0,PHL:0,608:0,PK:0,PAK:0,586:0,PR:0,PRI:0,630:0,PT:0,PRT:0,620:0,PY:0,PRY:0,600:0,SA:0,SAU:0,682:0,SG:0,SGP:0,702:0,SV:0,SLV:0,222:0,TH:0,THA:0,764:0,TT:0,TTO:0,780:0,TW:0,TWN:0,158:0,UM:0,UMI:0,581:0,US:0,USA:0,840:0,VE:0,VEN:0,862:0,VI:0,VIR:0,850:0,WS:0,WSM:0,882:0,YE:0,YEM:0,887:0,ZA:0,ZAF:0,710:0,ZW:0,ZWE:0,716:0,AE:6,ARE:6,784:6,AF:6,AFG:6,4:6,BH:6,BHR:6,48:6,DJ:6,DJI:6,262:6,DZ:6,DZA:6,12:6,EG:6,EGY:6,818:6,IQ:6,IRQ:6,368:6,IR:6,IRN:6,364:6,JO:6,JOR:6,400:6,KW:6,KWT:6,414:6,LY:6,LBY:6,434:6,OM:6,OMN:6,512:6,QA:6,QAT:6,634:6,SD:6,SDN:6,729:6,SY:6,SYR:6,760:6,MV:5,MDV:5,462:5};function De(e){return ge(e,he,pe)}const Ze=(e,t)=>Math.floor(e.getFullYear()/10)===Math.floor(t.getFullYear()/10),Q=(e,t)=>e.getFullYear()===t.getFullYear(),X=(e,t)=>Q(e,t)&&e.getMonth()===t.getMonth();function ye(e,t){return X(e,t)&&e.getDate()===t.getDate()}const Ie=e=>e.substring(0,1).toUpperCase()+e.substring(1),qe=(e,t)=>{const n=e.toLocaleString(t,{month:"long"});return Ie(n)},Je=e=>e.getDate().toString(),$e=e=>e.getFullYear().toString(),Me=(e,t)=>{const n=(t.getFullYear()-e.getFullYear())*12,o=t.getMonth()-e.getMonth();return n+o},Qe=(e,t)=>t.getFullYear()-e.getFullYear(),Xe=(e,t)=>Math.trunc((t.getFullYear()-e.getFullYear())/10),q=(e,t,n)=>{switch(e){case H.Month:return ye(t,n);case H.Year:return X(t,n);case H.Decade:return Q(t,n);default:return!1}},Ne=e=>[...e].sort((t,n)=>t.valueOf()-n.valueOf()),be=(e,t,n)=>{if(!n)return B.Out;const[o,f]=Ne(n),i=q(t,e,o),r=q(t,e,f);if(i&&r)return B.StartEnd;if(i)return B.Start;if(r)return B.End;const[M,D]=n.map(p=>p.valueOf()).sort();return e.valueOf()>=M&&e.valueOf()<=D?B.In:B.Out},et=e=>new Date(new Date(e.getFullYear(),e.getMonth(),e.getDate()+1).valueOf()-1),tt=e=>t=>e?`${t}-${e}`:void 0,Se=()=>ae()?(navigator==null?void 0:navigator.language)??"ru-RU":"ru-RU",Ce=({localeProp:e,ctxLang:t}={})=>e||new Intl.Locale(t?t.replace("_","-"):Se()),st=e=>De(e.language),Re=(e,t)=>t==="month"?e.getDay()===0||e.getDay()===6:!1,T=()=>{},Y={current:null},j=d.createContext({locale:Ce(),size:ce.M,viewDate:new Date,referenceDate:new Date,mode:G.Date,viewMode:H.Month,viewShift:0,setFocus:T,setValue:T,setViewMode:T,showHolidays:!1,showSeconds:!0,fitToContainer:!0,setViewShift:T,startPreselect:T,continuePreselect:T,completePreselect:T,restartPreselect:T,onDateAndTimeChange:T,onTimeChange:T,onDateChange:T,isDateAndTimeFilled:()=>!1,isDateFilled:()=>!1,isTimeFilled:()=>!1,getTestId:()=>{},applyButtonRef:Y,currentButtonRef:Y,hoursKeyboardNavigationRef:Y,minutesKeyboardNavigationRef:Y,secondsKeyboardNavigationRef:Y}),Te=e=>e.join("-");function nt({onSelect:e,onPreselect:t,onLeave:n,buildGrid:o,isTheSameItem:f,getItemLabel:i,isInPeriod:r,onKeyDown:M}){const{today:D,showHolidays:p,preselectedRange:s,value:l,dateAndTime:a,mode:y,viewDate:_,viewMode:k,focus:b,buildCellProps:P,firstNotDisableCell:I,isDateFilled:w}=d.useContext(j);return d.useMemo(()=>{let S=!1,A,O=!1;const v=o(_).map(L=>L.map(({date:c,address:C})=>{let u=!1,m,g={isDisabled:u,isHoliday:m};P&&(g=P(c,k),u=(g==null?void 0:g.isDisabled)??!1,m=g.isHoliday),m===void 0&&(m=p&&Re(c,k)),u||I&&!O&&(I.current=C,O=!0);const N=w()?new Date((a==null?void 0:a.year)??0,(a==null?void 0:a.month)??0,(a==null?void 0:a.day)??0):void 0,F=y===G.Range?be(c,k,s||l):B.Out,E=l&&!s&&!N?f(l[0],c)||f(l[1],c):!1,ee=s?f(s[0],c):!1,te=N?f(N,c):!1,U=b&&Te(C)===b?0:-1;S=U===0||S;const z=f(D||new Date,c),Z={date:c,onLeave:n,address:C,tabIndex:U,onSelect:e,isCurrent:z,isDisabled:u,isHoliday:m,onPreselect:t,inRangePosition:F,label:i(c),isSelected:E||ee||te,isInCurrentLevelPeriod:r(_,c),onKeyDown:M};return z&&(A=Z),Z}));return S||((A||v[0][0]).tabIndex=0),v},[P,o,a==null?void 0:a.day,a==null?void 0:a.month,a==null?void 0:a.year,I,b,i,w,r,f,y,M,n,t,e,s,p,D,l,_,k])}function rt({showSeconds:e,value:t}){const[n,o]=d.useState(()=>{if(Array.isArray(t)){const s=t[0];return{year:s.getFullYear(),month:s.getMonth(),day:s.getDate(),hours:s.getHours(),minutes:s.getMinutes(),seconds:s.getSeconds()}}return{year:void 0,month:void 0,day:void 0,hours:t==null?void 0:t.hours,minutes:t==null?void 0:t.minutes,seconds:t==null?void 0:t.seconds}}),f=d.useCallback(()=>{const{year:s,month:l,day:a}=n;return[s,l,a].every(y=>y!==void 0)},[n]),i=d.useCallback(()=>{const{hours:s,minutes:l,seconds:a}=n;return[s,l,...e?[a]:[]].every(y=>y!==void 0)},[n,e]),r=d.useCallback(()=>i()&&f(),[f,i]),M=d.useCallback(s=>{s instanceof Date?o(l=>({...l,year:s.getFullYear(),month:s.getMonth(),day:s.getDate()})):o(l=>({...l,...s}))},[]),D=d.useCallback(s=>{s instanceof Date?o(l=>({...l,hours:s.getHours(),minutes:s.getMinutes(),seconds:s.getSeconds()})):o(l=>({...l,...s}))},[]),p=d.useCallback(s=>{s instanceof Date?o({year:s.getFullYear(),month:s.getMonth(),day:s.getDate(),hours:s.getHours(),minutes:s.getMinutes(),seconds:s.getSeconds()}):o(s)},[]);return d.useEffect(()=>{if(!t){o({});return}Array.isArray(t)?p(t[0]):D(t)},[p,D,t]),{dateAndTime:n,setDateAndTime:o,isDateAndTimeFilled:r,isTimeFilled:i,isDateFilled:f,onDateChange:M,onTimeChange:D,onDateAndTimeChange:p}}const _e="_divider_ty3ko_1",ke="_footer_ty3ko_5",Pe="_currentWrapper_ty3ko_22",W={divider:_e,footer:ke,currentWrapper:Pe};function at(){const{size:e,viewMode:t,mode:n,today:o,setValue:f,dateAndTime:i,isTimeFilled:r,isDateAndTimeFilled:M,onDateAndTimeChange:D,applyButtonRef:p,currentButtonRef:s,hoursKeyboardNavigationRef:l,minutesKeyboardNavigationRef:a,secondsKeyboardNavigationRef:y,showSeconds:_,getTestId:k,referenceDate:b,setViewShift:P,onFocusLeave:I}=d.useContext(j),{t:w}=$("Calendar");if(![G.DateTime,"time"].includes(n)||t!=="month")return null;const S=n==="time"?!r():!M(),A=c=>{var C,u;c.key==="Tab"&&(c.shiftKey?(c.preventDefault(),_?(C=y.current)==null||C.focusItem(R((i==null?void 0:i.seconds)??0)):(u=a.current)==null||u.focusItem(R((i==null?void 0:i.minutes)??0))):S&&(I==null||I("next")))},O=c=>{c.key==="Tab"&&!c.shiftKey&&(I==null||I("next"))},v=()=>{var C,u,m,g;const c=o||new Date;D(c),P(Me(b,c)),(C=l.current)==null||C.focusItem(R(c.getHours()??0)),(u=a.current)==null||u.focusItem(R(c.getMinutes()??0)),(m=y.current)==null||m.focusItem(R(c.getSeconds()??0)),(g=p.current)==null||g.focus()},L=()=>{if(!i)return;const c=o||new Date,{year:C=c.getFullYear(),month:u=c.getMonth(),day:m=c.getMonth(),hours:g,minutes:N,seconds:F}=i,E=new Date(C,u,m,g,N,_?F:0);f([E,E])};return h.jsxs("div",{className:W.footer,"data-size":e,children:[h.jsx(V,{className:W.divider}),h.jsxs("div",{className:W.currentWrapper,"data-size":e,children:[h.jsx(ne,{label:w("current"),size:e==="s"?"xs":"s",onClick:v,ref:s,onKeyDown:A,"data-test-id":k("current-button")}),h.jsx(re,{icon:h.jsx(se,{}),size:e==="s"?"xs":"s",disabled:S,onClick:L,ref:p,onKeyDown:O,"data-test-id":k("apply-button")})]})]})}function x({numberOfItems:e,value:t,onChange:n,className:o,onKeyDownGetter:f,keyboardNavigationRef:i,navigationStartRef:r,"data-test-id":M,...D}){const{size:p}=d.useContext(j),s=d.useMemo(()=>new Array(e).fill(null).map(()=>d.createRef()),[e]);d.useImperativeHandle(r,()=>({focus:()=>{var a;(a=i==null?void 0:i.current)==null||a.focusItem(R(t||0))}}));const l=d.useMemo(()=>new Array(e).fill(void 0).map((a,y)=>({id:y,content:{option:String(y).padStart(2,"0")},"data-test-id":M,onKeyDown:f==null?void 0:f(y),itemRef:s[y]})),[M,s,e,f]);return h.jsx(oe,{...ie(D),size:p,items:l,scroll:!0,keyboardNavigationRef:i,selection:{mode:"single",value:t,onChange:n},className:o,hasListInFocusChain:!1,scrollToSelectedItem:!0})}try{x.displayName="TimeList",x.__docgenInfo={description:"",displayName:"TimeList",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},numberOfItems:{defaultValue:null,description:"",name:"numberOfItems",required:!0,type:{name:"number"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"number"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: number) => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onKeyDownGetter:{defaultValue:null,description:"",name:"onKeyDownGetter",required:!1,type:{name:"((id: number) => KeyboardEventHandler)"}},keyboardNavigationRef:{defaultValue:null,description:"",name:"keyboardNavigationRef",required:!1,type:{name:"RefObject<{ focusItem(id: ItemId): void; }>"}},navigationStartRef:{defaultValue:null,description:"",name:"navigationStartRef",required:!1,type:{name:"RefObject<{ focus(): void; }>"}}}}}catch{}const we="_divider_pigrd_1",Ee="_timePicker_pigrd_6",Ke="_timeListsWrapper_pigrd_35",Be="_title_pigrd_53",He="_header_pigrd_58",K={divider:we,timePicker:Ee,timeListsWrapper:Ke,title:Be,header:He};function J({showDivider:e=!0}){const{t}=$("Calendar"),{size:n,mode:o,fitToContainer:f,showSeconds:i,dateAndTime:r,onTimeChange:M,applyButtonRef:D,currentButtonRef:p,hoursKeyboardNavigationRef:s,minutesKeyboardNavigationRef:l,secondsKeyboardNavigationRef:a,setFocus:y,getTestId:_,navigationStartRef:k,onFocusLeave:b}=d.useContext(j),P=r==null?void 0:r.hours,I=r==null?void 0:r.minutes,w=r==null?void 0:r.seconds,S=d.useCallback(u=>m=>{const g={hours:0,minutes:0,seconds:0,...r};M({...g,[u]:m??(r==null?void 0:r[u])??0})},[r,M]),A=d.useMemo(()=>S("hours"),[S]),O=d.useMemo(()=>S("minutes"),[S]),v=d.useMemo(()=>S("seconds"),[S]),L=d.useCallback(u=>m=>{var g,N;switch(m.key){case"Tab":if(o==="time"&&m.shiftKey){b==null||b("prev");break}m.stopPropagation(),m.preventDefault(),m.shiftKey?y(le):(g=l.current)==null||g.focusItem(R(I??0));break;case"Enter":(N=l.current)==null||N.focusItem(R(I??0));break;case"ArrowUp":if(o==="time"&&u===0){b==null||b("prev");break}break}},[I,l,o,b,y]),c=d.useCallback(()=>u=>{var m,g,N,F,E;switch(u.key){case"Tab":u.stopPropagation(),u.preventDefault(),u.shiftKey?(m=s.current)==null||m.focusItem(R(P??0)):i?(g=a.current)==null||g.focusItem(R(w??0)):(N=p.current)==null||N.focus();break;case"Enter":i?(F=a.current)==null||F.focusItem(R(w??0)):(E=D.current)==null||E.focus();break}},[D,p,P,s,w,a,i]),C=d.useCallback(()=>u=>{var m,g,N;switch(u.key){case"Tab":u.stopPropagation(),u.preventDefault(),u.shiftKey?(m=l.current)==null||m.focusItem(R(I??0)):(g=p.current)==null||g.focus();break;case"Enter":(N=D.current)==null||N.focus();break}},[D,p,I,l]);return h.jsxs(h.Fragment,{children:[e&&h.jsx(V,{orientation:"vertical",className:K.divider}),h.jsxs("div",{className:K.timePicker,"data-size":n,"data-fit-to-container":f||void 0,children:[h.jsx("div",{className:K.header,"data-size":n,children:h.jsx("span",{className:K.title,children:t("time")})}),h.jsxs("div",{className:K.timeListsWrapper,"data-size":n,"data-show-seconds":i||void 0,children:[h.jsx(x,{value:P,onChange:A,"data-test-id":_("hours"),numberOfItems:ue,onKeyDownGetter:L,keyboardNavigationRef:s,navigationStartRef:o==="time"?k:void 0}),h.jsx(V,{className:K.divider,orientation:"vertical"}),h.jsx(x,{value:I,onChange:O,"data-test-id":_("minutes"),numberOfItems:de,onKeyDownGetter:c,keyboardNavigationRef:l}),i&&h.jsxs(h.Fragment,{children:[h.jsx(V,{className:K.divider,orientation:"vertical"}),h.jsx(x,{value:w,onChange:v,"data-test-id":_("seconds"),numberOfItems:fe,onKeyDownGetter:C,keyboardNavigationRef:a})]})]})]})]})}try{J.displayName="TimePickerBase",J.__docgenInfo={description:"",displayName:"TimePickerBase",props:{showDivider:{defaultValue:{value:"true"},description:"",name:"showDivider",required:!1,type:{name:"boolean"}}}}}catch{}export{le as A,G as C,ze as D,at as F,Ue as G,B as I,ce as S,J as T,H as V,Ce as a,j as b,nt as c,Qe as d,$e as e,Ze as f,tt as g,st as h,Q as i,ye as j,Je as k,X as l,Me as m,qe as n,Xe as o,Ie as p,Ne as q,et as r,Te as s,rt as u};
