import{j as e}from"./jsx-runtime-BTJTZTIL.js";import{c as x}from"./index-DUmpqB7p.js";import{m as lu}from"./index-B7wZyJkK.js";import{r as o}from"./index-CJ_LmFaV.js";import{S as ru}from"./constants-9uwKbtvo.js";import{F as iu,g as su,C as ou,V as pu}from"./FieldDecorator-CRUbVAIy.js";import{P as du}from"./index-CwHIobxP.js";import{M as fu}from"./index-3XDw48l5.js";import{u as mu}from"./LocaleProvider-CyhbxqE1.js";import{u as cu}from"./useValueControl-CNLw7ht-.js";import{u as Eu,a as Fu}from"./usePrefix-BmEKZSSL.js";import{e as Bu}from"./componentPropsProcessors-UJEZy8aQ.js";import{T as vu}from"./Tooltip-BNp3usZT.js";import{F as hu}from"./FieldContainerPrivate-BKsPb8vW.js";import{I as Du}from"./InputPrivate-D3npAkF4.js";import{B as A}from"./ButtonFunction-LyCkfHIg.js";const bu="_stepper_bu7sr_1",gu="_button_bu7sr_5",Vu="_trigger_bu7sr_12",_u="_wrap_bu7sr_16",yu="_prefixWrapper_bu7sr_23",Iu="_postfixWrapper_bu7sr_27",i={stepper:bu,button:gu,trigger:Vu,wrap:_u,prefixWrapper:yu,postfixWrapper:Iu},xu=2e3,Au=(s,p)=>s>0?s:p<0?p:0,Cu={s:8,m:9,l:10},C=o.forwardRef(({id:s,name:p,value:T,min:t=Number.NEGATIVE_INFINITY,max:a=Number.POSITIVE_INFINITY,step:F=1,disabled:n=!1,readonly:l=!1,allowMoreThanLimits:b=!0,onChange:N,onFocus:B,onBlur:v,className:q,label:S,labelTooltip:w,labelTooltipPlacement:P,required:j=!1,caption:M,hint:R,showHintIcon:W,size:d=ru.S,validationState:O=pu.Default,error:g,prefix:L,postfix:H,autoFocus:k,...K},G)=>{const{t:V}=mu("Fields"),[r=0,f]=cu({value:T,defaultValue:Au(t,a),onChange:N}),[Y,h]=o.useState(!1),[$,m]=o.useState(""),D=o.useRef(),_=o.useRef(null),z=typeof t=="number"&&r<=t||l||n,U=typeof a=="number"&&r>=a||l||n,c=Eu({prefix:L,disabled:n}),E=Fu({postfix:H,disabled:n}),y=su({validationState:O,error:g}),I=u=>{f(u),h(!0),D.current=setTimeout(()=>{h(!1),m("")},xu)};o.useEffect(()=>()=>{clearTimeout(D.current)},[]);const Z=u=>{b||(a!==void 0&&r>a&&(m(`${V("limitTooltip.max")}${a}`),I(a)),t!==void 0&&r<t&&(m(`${V("limitTooltip.min")}${t}`),I(t))),v==null||v(u)},J=u=>{clearTimeout(D.current),h(!1),m(""),B==null||B(u)},Q=(u,nu)=>f(Number(u),nu),X=()=>{},uu=u=>{u.preventDefault(),u.stopPropagation(),f(Math.min(Math.max(t,r-F),a))},eu=u=>{u.preventDefault(),u.stopPropagation(),f(Math.max(Math.min(a,r+F),t))},tu=()=>{},au=()=>{};return e.jsx(iu,{className:q,label:S,labelTooltip:w,labelTooltipPlacement:P,labelFor:s,required:j,caption:M,hint:R,disabled:n,readonly:l,showHintIcon:W,size:d,validationState:y,error:g,...Bu(K),children:e.jsx(vu,{tip:$,open:b?!1:Y,"data-test-id":"field-stepper__limit-tooltip",triggerClassName:i.trigger,children:e.jsx(hu,{size:d,validationState:y,disabled:n,readonly:l,variant:ou.SingleLine,inputRef:_,prefix:e.jsx(A,{tabIndex:-1,size:"xs",className:i.button,icon:e.jsx(fu,{}),onClick:uu,onKeyDown:tu,disabled:z,"data-test-id":"field-stepper__minus-button"}),postfix:e.jsx(A,{tabIndex:-1,size:"xs",className:i.button,icon:e.jsx(du,{}),onClick:eu,onKeyDown:au,disabled:U,"data-test-id":"field-stepper__plus-button"}),children:e.jsxs("div",{className:i.wrap,children:[e.jsx("div",{className:x({[i.prefixWrapper]:c.show}),children:c.show&&c.render({key:c.id})}),e.jsx("div",{style:{width:String(r).length*Cu[d],maxWidth:"100%"},children:e.jsx(Du,{ref:lu(G,_),className:i.stepper,"data-size":d,value:String(r),tabIndex:0,onKeyDown:X,onChange:Q,onBlur:Z,onFocus:J,disabled:n,readonly:l,type:"number",id:s,step:F,name:p,min:t,max:a,autoFocus:k,"data-test-id":"field-stepper__input"})}),e.jsx("div",{className:x({[i.postfixWrapper]:E.show}),children:E.show&&E.render({key:E.id})})]})})})})});try{C.displayName="FieldStepper",C.__docgenInfo={description:"",displayName:"FieldStepper",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"Значение поля",name:"value",required:!1,type:{name:"number"}},onChange:{defaultValue:null,description:"Колбек смены значения",name:"onChange",required:!1,type:{name:"((value: number, e?: ChangeEvent<HTMLInputElement>) => void)"}},step:{defaultValue:{value:"1"},description:"Шаг поля",name:"step",required:!1,type:{name:"number"}},allowMoreThanLimits:{defaultValue:{value:"true"},description:"Можно ли вводить c клавиатуры числа, выходящие за пределы min/max",name:"allowMoreThanLimits",required:!1,type:{name:"boolean"}},prefix:{defaultValue:null,description:"Произвольный префикс для поля",name:"prefix",required:!1,type:{name:"ReactNode"}},postfix:{defaultValue:null,description:"Произвольный постфикс для поля",name:"postfix",required:!1,type:{name:"ReactNode"}},id:{defaultValue:null,description:"Значение html-атрибута id",name:"id",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"Значение html-атрибута name",name:"name",required:!1,type:{name:"string"}},autoFocus:{defaultValue:{value:"false"},description:"Включен ли авто-фокус для поля",name:"autoFocus",required:!1,type:{name:"boolean"}},onFocus:{defaultValue:null,description:"Колбек обработки получения фокуса",name:"onFocus",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},onBlur:{defaultValue:null,description:"Колбек обработки потери фокуса",name:"onBlur",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},disabled:{defaultValue:{value:"false"},description:"Является ли поле деактивированным",name:"disabled",required:!1,type:{name:"boolean"}},max:{defaultValue:{value:"Number.POSITIVE_INFINITY"},description:"Максимальное значение поля",name:"max",required:!1,type:{name:"number"}},min:{defaultValue:{value:"Number.NEGATIVE_INFINITY"},description:"Минимальное значение поля",name:"min",required:!1,type:{name:"number"}},readonly:{defaultValue:{value:"false"},description:"Является ли поле доступным только для чтения",name:"readonly",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},caption:{defaultValue:null,description:"Подпись справа от лейбла",name:"caption",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"Лейбл",name:"label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"s"},description:"Размер",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'},{value:'"l"'}]}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},labelTooltip:{defaultValue:null,description:"Всплывающая подсказка лейбла",name:"labelTooltip",required:!1,type:{name:"ReactNode"}},required:{defaultValue:{value:"false"},description:"Является ли поле обязательным",name:"required",required:!1,type:{name:"boolean"}},hint:{defaultValue:null,description:"Подсказка внизу",name:"hint",required:!1,type:{name:"string"}},showHintIcon:{defaultValue:null,description:"Отображать иконку подсказки",name:"showHintIcon",required:!1,type:{name:"boolean"}},validationState:{defaultValue:{value:"default"},description:"Состояние валидации",name:"validationState",required:!1,type:{name:"enum",value:[{value:'"error"'},{value:'"warning"'},{value:'"success"'},{value:'"default"'}]}},labelTooltipPlacement:{defaultValue:{value:"top"},description:"Расположение подсказки лейбла",name:"labelTooltipPlacement",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"left-start"'},{value:'"left-end"'},{value:'"right"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"top"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom"'},{value:'"bottom-start"'},{value:'"bottom-end"'}]}}}}}catch{}export{C as F};
