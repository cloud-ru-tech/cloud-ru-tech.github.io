import{j as b}from"./jsx-runtime-BTJTZTIL.js";import{m as fu}from"./index-B7wZyJkK.js";import{r as o,R as H}from"./index-CJ_LmFaV.js";import{S as cu}from"./constants-9uwKbtvo.js";import{F as pu,g as mu,C as Eu,V as vu}from"./FieldDecorator-C5NteYAG.js";import{c as Bu}from"./index-DUmpqB7p.js";import{_ as hu}from"./extends-CF3RwP-h.js";import{_ as gu}from"./objectWithoutPropertiesLoose-Dsqj8S3w.js";import{u as Cu}from"./useIsomorphicLayoutEffect-BAXQmlEq.js";import{e as Y}from"./componentPropsProcessors-UJEZy8aQ.js";import{u as Au}from"./useValueControl-C51frgGe.js";import{u as Fu}from"./useClearButton-CBEN1tav.js";import{u as yu}from"./useCopyButton-BRHrjF_j.js";import{u as xu}from"./useButtonNavigation-CVCsehRW.js";import{F as bu}from"./FieldContainerPrivate-FMwqMCEU.js";import{S as Du}from"./Scroll-CyeY1SIb.js";var Vu=o.useLayoutEffect,Tu=function(u){var e=H.useRef(u);return Vu(function(){e.current=u}),e},W=function(u,e){if(typeof u=="function"){u(e);return}u.current=e},Su=function(u,e){var a=H.useRef();return H.useCallback(function(n){u.current=n,a.current&&W(a.current,null),a.current=e,e&&W(e,n)},[e])},j={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},qu=function(u){Object.keys(j).forEach(function(e){u.style.setProperty(e,j[e],"important")})},P=qu,l=null,$=function(u,e){var a=u.scrollHeight;return e.sizingStyle.boxSizing==="border-box"?a+e.borderSize:a-e.paddingSize};function Ru(t,u,e,a){e===void 0&&(e=1),a===void 0&&(a=1/0),l||(l=document.createElement("textarea"),l.setAttribute("tabindex","-1"),l.setAttribute("aria-hidden","true"),P(l)),l.parentNode===null&&document.body.appendChild(l);var n=t.paddingSize,f=t.borderSize,i=t.sizingStyle,s=i.boxSizing;Object.keys(i).forEach(function(v){var B=v;l.style[B]=i[B]}),P(l),l.value=u;var d=$(l,t);l.value=u,d=$(l,t),l.value="x";var r=l.scrollHeight-n,c=r*e;s==="border-box"&&(c=c+n+f),d=Math.max(c,d);var m=r*a;return s==="border-box"&&(m=m+n+f),d=Math.min(m,d),[d,r]}var K=function(){},Hu=function(u,e){return u.reduce(function(a,n){return a[n]=e[n],a},{})},Lu=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],_u=!!document.documentElement.currentStyle,wu=function(u){var e=window.getComputedStyle(u);if(e===null)return null;var a=Hu(Lu,e),n=a.boxSizing;if(n==="")return null;_u&&n==="border-box"&&(a.width=parseFloat(a.width)+parseFloat(a.borderRightWidth)+parseFloat(a.borderLeftWidth)+parseFloat(a.paddingRight)+parseFloat(a.paddingLeft)+"px");var f=parseFloat(a.paddingBottom)+parseFloat(a.paddingTop),i=parseFloat(a.borderBottomWidth)+parseFloat(a.borderTopWidth);return{sizingStyle:a,paddingSize:f,borderSize:i}},zu=wu;function Z(t,u,e){var a=Tu(e);o.useLayoutEffect(function(){var n=function(i){return a.current(i)};if(t)return t.addEventListener(u,n),function(){return t.removeEventListener(u,n)}},[])}var Mu=function(u){Z(window,"resize",u)},Nu=function(u){Z(document.fonts,"loadingdone",u)},Iu=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],ku=function(u,e){var a=u.cacheMeasurements,n=u.maxRows,f=u.minRows,i=u.onChange,s=i===void 0?K:i,d=u.onHeightChange,r=d===void 0?K:d,c=gu(u,Iu),m=c.value!==void 0,v=o.useRef(null),B=Su(v,e),y=o.useRef(0),C=o.useRef(),h=function(){var p=v.current,F=a&&C.current?C.current:zu(p);if(F){C.current=F;var x=Ru(F,p.value||p.placeholder||"x",f,n),E=x[0],g=x[1];y.current!==E&&(y.current=E,p.style.setProperty("height",E+"px","important"),r(E,{rowHeight:g}))}},A=function(p){m||h(),s(p)};return o.useLayoutEffect(h),Mu(h),Nu(h),o.createElement("textarea",hu({},c,{onChange:A,ref:B}))},Wu=o.forwardRef(ku);const ju="_textarea_14eg6_1",Pu={textarea:ju},L=o.forwardRef(({name:t,value:u="",onChange:e,placeholder:a,id:n,className:f,disabled:i=!1,readonly:s=!1,autoComplete:d=!1,autoFocus:r=!1,maxLength:c,onFocus:m,onBlur:v,onKeyDown:B,tabIndex:y,minRows:C=3,spellCheck:h,inputMode:A,...D},p)=>{const[,F]=o.useState(!1);Cu(()=>F(!0),[]);const x=g=>e==null?void 0:e(g.target.value,g),E=g=>g.stopPropagation();return b.jsx(Wu,{id:n,name:t,value:u,ref:p,className:Bu(f,Pu.textarea),autoComplete:d?"on":"off",autoFocus:r,placeholder:a,disabled:i,readOnly:s,maxLength:c,onChange:x,onClick:E,onFocus:m,onBlur:v,onKeyDown:B,tabIndex:y,minRows:C,spellCheck:h,inputMode:A,...Y(D)})});try{L.displayName="TextArea",L.__docgenInfo={description:"",displayName:"TextArea",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},autoFocus:{defaultValue:{value:"false"},description:"Включен ли авто-фокус",name:"autoFocus",required:!1,type:{name:"boolean"}},id:{defaultValue:null,description:"HTML-аттрибут id",name:"id",required:!1,type:{name:"string"}},spellCheck:{defaultValue:{value:"true"},description:"Включение проверки орфографии",name:"spellCheck",required:!1,type:{name:"boolean"}},tabIndex:{defaultValue:null,description:"HTML-аттрибут tab-index",name:"tabIndex",required:!1,type:{name:"number"}},inputMode:{defaultValue:null,description:"Режим работы экранной клавиатуры",name:"inputMode",required:!1,type:{name:"enum",value:[{value:'"search"'},{value:'"text"'},{value:'"none"'},{value:'"tel"'},{value:'"url"'},{value:'"email"'},{value:'"numeric"'},{value:'"decimal"'}]}},onFocus:{defaultValue:null,description:"Колбек получения фокуса",name:"onFocus",required:!1,type:{name:"FocusEventHandler<HTMLTextAreaElement>"}},onBlur:{defaultValue:null,description:"Колбек потери фокуса",name:"onBlur",required:!1,type:{name:"FocusEventHandler<HTMLTextAreaElement>"}},onChange:{defaultValue:null,description:"Колбек смены значения",name:"onChange",required:!1,type:{name:"((value: string, e: ChangeEvent<HTMLTextAreaElement>) => void)"}},onKeyDown:{defaultValue:null,description:"Колбек нажатия клавиши клавиатуры",name:"onKeyDown",required:!1,type:{name:"KeyboardEventHandler<HTMLTextAreaElement>"}},name:{defaultValue:null,description:"HTML-аттрибут name",name:"name",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"Является ли поле деактивированным",name:"disabled",required:!1,type:{name:"boolean"}},value:{defaultValue:{value:""},description:"HTML-аттрибут value",name:"value",required:!1,type:{name:"string"}},readonly:{defaultValue:{value:"false"},description:"Является ли поле доступным только на чтение",name:"readonly",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"Плейсхолдер",name:"placeholder",required:!1,type:{name:"string"}},maxLength:{defaultValue:null,description:"Максимальное кол-во символов",name:"maxLength",required:!1,type:{name:"number"}},autoComplete:{defaultValue:{value:"false"},description:"Включен ли автокомплит",name:"autoComplete",required:!1,type:{name:"boolean"}},minRows:{defaultValue:{value:"3"},description:"Минимальное кол-во строк, до которого размер поля может быть увеличен",name:"minRows",required:!1,type:{name:"number"}}}}}catch{}const $u="_container_sv6u4_1",Ku="_scrollContainer_sv6u4_9",Ou="_textarea_sv6u4_20",Yu="_postfix_sv6u4_24",R={container:$u,scrollContainer:Ku,textarea:Ou,postfix:Yu},O=o.forwardRef(({id:t,name:u,value:e,placeholder:a,maxLength:n,minRows:f=3,maxRows:i=1e3,disabled:s=!1,resizable:d=!1,readonly:r=!1,showCopyButton:c=!0,showClearButton:m=!0,allowMoreThanMaxLength:v=!0,showHintIcon:B,onChange:y,onFocus:C,onBlur:h,onKeyDown:A,className:D,label:p,labelTooltip:F,labelTooltipPlacement:x,required:E=!1,caption:g,hint:G,error:_,size:V=cu.S,validationState:U=vu.Default,onCopyButtonClick:X,footer:w,spellCheck:J,autoFocus:Q,inputMode:uu,...eu},au)=>{const q=o.useRef(null),tu=o.useRef(null),nu=o.useRef(null),z=!r&&!s&&d,[T="",M]=Au({value:e,defaultValue:"",onChange:y}),ru=c&&!!T&&!s&&r,lu=m&&!!T&&!s&&!r,N=mu({validationState:U,error:_}),I=Fu({clearButtonRef:tu,showClearButton:lu,size:V,onClear:()=>{var S;M(""),E&&((S=q.current)==null||S.focus())}}),k=yu({copyButtonRef:nu,showCopyButton:ru,size:V,valueToCopy:T,onCopyButtonClick:X}),{postfixButtons:ou,inputTabIndex:iu,onInputKeyDown:su}=xu({inputRef:q,postfixButtons:o.useMemo(()=>[I,k],[I,k]),readonly:r,submitKeys:["Enter","Space","Tab"]}),du=S=>{su(S),A==null||A(S)};return b.jsx(pu,{className:D,label:p,labelTooltip:F,labelTooltipPlacement:x,labelFor:t,required:E,caption:g,length:n?{max:n,current:T.length}:void 0,hint:G,disabled:s,readonly:r,showHintIcon:B,size:V,error:_,validationState:N,...Y(eu),children:b.jsxs(bu,{className:R.container,size:V,validationState:N,disabled:s,readonly:r,"data-resizable":z||void 0,"data-actions":!!w||void 0,variant:Eu.MultiLine,style:{"--max-rows":i,"--min-rows":f},inputRef:q,postfix:b.jsx("span",{className:R.postfix,children:ou}),children:[b.jsx(Du,{className:R.scrollContainer,size:"s",barHideStrategy:"never",resize:z?"vertical":"none","data-test-id":"field-textarea__scroll-area",children:b.jsx(L,{className:R.textarea,"data-size":V,value:T,onChange:M,placeholder:a,disabled:s,readonly:r,minRows:f,id:t,name:u,ref:fu(au,q),onFocus:C,onBlur:h,onKeyDown:du,tabIndex:iu,spellCheck:J,autoFocus:Q,maxLength:v?void 0:n||void 0,inputMode:uu,"data-test-id":"field-textarea__input"})}),w]})})});try{O.displayName="FieldTextArea",O.__docgenInfo={description:"",displayName:"FieldTextArea",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},minRows:{defaultValue:{value:"3"},description:"Минимальное кол-во строк, до которого размер поля может быть увеличен",name:"minRows",required:!1,type:{name:"number"}},maxRows:{defaultValue:{value:"1000"},description:"Максимальное кол-во строк, до которого размер поля может быть увеличен",name:"maxRows",required:!1,type:{name:"number"}},resizable:{defaultValue:{value:"false"},description:"Может ли ли пользователь изменять размеры поля (если св-во не включено, поле автоматически меняет свой размер)",name:"resizable",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"Колбек смены значения",name:"onChange",required:!1,type:{name:"((value: string, e?: ChangeEvent<HTMLTextAreaElement>) => void)"}},showCopyButton:{defaultValue:null,description:"Отображение кнопки Копировать для поля (актуально только для `readonly = true`)",name:"showCopyButton",required:!1,type:{name:"boolean"}},onCopyButtonClick:{defaultValue:null,description:"Колбек клика по кнопке Копировать для поля",name:"onCopyButtonClick",required:!1,type:{name:"(() => void)"}},showClearButton:{defaultValue:{value:"true"},description:"Отображение кнопки очистки поля",name:"showClearButton",required:!1,type:{name:"boolean"}},allowMoreThanMaxLength:{defaultValue:{value:"true"},description:"Можно ли вводить больше разрешённого кол-ва символов",name:"allowMoreThanMaxLength",required:!1,type:{name:"boolean"}},footer:{defaultValue:null,description:"Нода под футер",name:"footer",required:!1,type:{name:"ReactNode"}},value:{defaultValue:null,description:"HTML-аттрибут value",name:"value",required:!1,type:{name:"string"}},autoFocus:{defaultValue:null,description:"Включен ли авто-фокус",name:"autoFocus",required:!1,type:{name:"boolean"}},id:{defaultValue:null,description:"HTML-аттрибут id",name:"id",required:!1,type:{name:"string"}},spellCheck:{defaultValue:{value:"true"},description:"Включение проверки орфографии",name:"spellCheck",required:!1,type:{name:"boolean"}},inputMode:{defaultValue:null,description:"Режим работы экранной клавиатуры",name:"inputMode",required:!1,type:{name:"enum",value:[{value:'"search"'},{value:'"text"'},{value:'"none"'},{value:'"tel"'},{value:'"url"'},{value:'"email"'},{value:'"numeric"'},{value:'"decimal"'}]}},onFocus:{defaultValue:null,description:"Колбек получения фокуса",name:"onFocus",required:!1,type:{name:"FocusEventHandler<HTMLTextAreaElement>"}},onBlur:{defaultValue:null,description:"Колбек потери фокуса",name:"onBlur",required:!1,type:{name:"FocusEventHandler<HTMLTextAreaElement>"}},onKeyDown:{defaultValue:null,description:"Колбек нажатия клавиши клавиатуры",name:"onKeyDown",required:!1,type:{name:"KeyboardEventHandler<HTMLTextAreaElement>"}},name:{defaultValue:null,description:"HTML-аттрибут name",name:"name",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"Является ли поле деактивированным",name:"disabled",required:!1,type:{name:"boolean"}},readonly:{defaultValue:{value:"false"},description:"Является ли поле доступным только на чтение",name:"readonly",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"Плейсхолдер",name:"placeholder",required:!1,type:{name:"string"}},maxLength:{defaultValue:null,description:"Максимальное кол-во символов",name:"maxLength",required:!1,type:{name:"number"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},caption:{defaultValue:null,description:"Подпись справа от лейбла",name:"caption",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"Лейбл",name:"label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"s"},description:"Размер",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'},{value:'"l"'}]}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},labelTooltip:{defaultValue:null,description:"Всплывающая подсказка лейбла",name:"labelTooltip",required:!1,type:{name:"ReactNode"}},required:{defaultValue:{value:"false"},description:"Является ли поле обязательным",name:"required",required:!1,type:{name:"boolean"}},labelTooltipPlacement:{defaultValue:{value:"top"},description:"Расположение подсказки лейбла",name:"labelTooltipPlacement",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"left-start"'},{value:'"left-end"'},{value:'"right"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"top"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom"'},{value:'"bottom-start"'},{value:'"bottom-end"'}]}},hint:{defaultValue:null,description:"Подсказка внизу",name:"hint",required:!1,type:{name:"string"}},validationState:{defaultValue:{value:"default"},description:"Состояние валидации",name:"validationState",required:!1,type:{name:"enum",value:[{value:'"error"'},{value:'"warning"'},{value:'"success"'},{value:'"default"'}]}},showHintIcon:{defaultValue:null,description:"Отображать иконку подсказки",name:"showHintIcon",required:!1,type:{name:"boolean"}}}}}catch{}export{O as F};
