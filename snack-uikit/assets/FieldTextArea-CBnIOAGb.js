import{j as x}from"./jsx-runtime-BTJTZTIL.js";import{m as du}from"./index-B7wZyJkK.js";import{r as o,R as H}from"./index-CJ_LmFaV.js";import{S as fu}from"./constants-9uwKbtvo.js";import{F as cu,g as pu,C as mu,V as Eu}from"./FieldDecorator-CRUbVAIy.js";import{c as Bu}from"./index-DUmpqB7p.js";import{_ as vu}from"./extends-CF3RwP-h.js";import{_ as hu}from"./objectWithoutPropertiesLoose-Dsqj8S3w.js";import{u as gu}from"./useIsomorphicLayoutEffect-BAXQmlEq.js";import{e as Y}from"./componentPropsProcessors-UJEZy8aQ.js";import{u as Cu}from"./useValueControl-CNLw7ht-.js";import{u as Fu}from"./useClearButton-DMWmUR1d.js";import{u as yu}from"./useCopyButton-Cm96okR0.js";import{u as Au}from"./useButtonNavigation-CVCsehRW.js";import{F as xu}from"./FieldContainerPrivate-BKsPb8vW.js";import{S as bu}from"./Scroll-B3e6J9cA.js";var Du=o.useLayoutEffect,Vu=function(u){var e=H.useRef(u);return Du(function(){e.current=u}),e},W=function(u,e){if(typeof u=="function"){u(e);return}u.current=e},Tu=function(u,e){var a=H.useRef();return H.useCallback(function(n){u.current=n,a.current&&W(a.current,null),a.current=e,e&&W(e,n)},[e])},j={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},qu=function(u){Object.keys(j).forEach(function(e){u.style.setProperty(e,j[e],"important")})},P=qu,l=null,$=function(u,e){var a=u.scrollHeight;return e.sizingStyle.boxSizing==="border-box"?a+e.borderSize:a-e.paddingSize};function Su(t,u,e,a){e===void 0&&(e=1),a===void 0&&(a=1/0),l||(l=document.createElement("textarea"),l.setAttribute("tabindex","-1"),l.setAttribute("aria-hidden","true"),P(l)),l.parentNode===null&&document.body.appendChild(l);var n=t.paddingSize,f=t.borderSize,i=t.sizingStyle,s=i.boxSizing;Object.keys(i).forEach(function(B){var v=B;l.style[v]=i[v]}),P(l),l.value=u;var d=$(l,t);l.value=u,d=$(l,t),l.value="x";var r=l.scrollHeight-n,p=r*e;s==="border-box"&&(p=p+n+f),d=Math.max(p,d);var E=r*a;return s==="border-box"&&(E=E+n+f),d=Math.min(E,d),[d,r]}var K=function(){},Ru=function(u,e){return u.reduce(function(a,n){return a[n]=e[n],a},{})},Hu=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],Lu=!!document.documentElement.currentStyle,_u=function(u){var e=window.getComputedStyle(u);if(e===null)return null;var a=Ru(Hu,e),n=a.boxSizing;if(n==="")return null;Lu&&n==="border-box"&&(a.width=parseFloat(a.width)+parseFloat(a.borderRightWidth)+parseFloat(a.borderLeftWidth)+parseFloat(a.paddingRight)+parseFloat(a.paddingLeft)+"px");var f=parseFloat(a.paddingBottom)+parseFloat(a.paddingTop),i=parseFloat(a.borderBottomWidth)+parseFloat(a.borderTopWidth);return{sizingStyle:a,paddingSize:f,borderSize:i}},wu=_u;function Z(t,u,e){var a=Vu(e);o.useLayoutEffect(function(){var n=function(i){return a.current(i)};if(t)return t.addEventListener(u,n),function(){return t.removeEventListener(u,n)}},[])}var zu=function(u){Z(window,"resize",u)},Mu=function(u){Z(document.fonts,"loadingdone",u)},Nu=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],Iu=function(u,e){var a=u.cacheMeasurements,n=u.maxRows,f=u.minRows,i=u.onChange,s=i===void 0?K:i,d=u.onHeightChange,r=d===void 0?K:d,p=hu(u,Nu),E=p.value!==void 0,B=o.useRef(null),v=Tu(B,e),y=o.useRef(0),g=o.useRef(),h=function(){var m=B.current,F=a&&g.current?g.current:wu(m);if(F){g.current=F;var A=Su(F,m.value||m.placeholder||"x",f,n),c=A[0],R=A[1];y.current!==c&&(y.current=c,m.style.setProperty("height",c+"px","important"),r(c,{rowHeight:R}))}},C=function(m){E||h(),s(m)};return o.useLayoutEffect(h),zu(h),Mu(h),o.createElement("textarea",vu({},p,{onChange:C,ref:v}))},ku=o.forwardRef(Iu);const Wu="_textarea_14eg6_1",ju={textarea:Wu},L=o.forwardRef(({name:t,value:u="",onChange:e,placeholder:a,id:n,className:f,disabled:i=!1,readonly:s=!1,autoComplete:d=!1,autoFocus:r=!1,maxLength:p,onFocus:E,onBlur:B,onKeyDown:v,tabIndex:y,minRows:g=3,spellCheck:h,...C},b)=>{const[,m]=o.useState(!1);gu(()=>m(!0),[]);const F=c=>e==null?void 0:e(c.target.value,c),A=c=>c.stopPropagation();return x.jsx(ku,{id:n,name:t,value:u,ref:b,className:Bu(f,ju.textarea),autoComplete:d?"on":"off",autoFocus:r,placeholder:a,disabled:i,readOnly:s,maxLength:p,onChange:F,onClick:A,onFocus:E,onBlur:B,onKeyDown:v,tabIndex:y,minRows:g,spellCheck:h,...Y(C)})});try{L.displayName="TextArea",L.__docgenInfo={description:"",displayName:"TextArea",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"HTML-аттрибут id",name:"id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"HTML-аттрибут name",name:"name",required:!1,type:{name:"string"}},autoFocus:{defaultValue:{value:"false"},description:"Включен ли авто-фокус",name:"autoFocus",required:!1,type:{name:"boolean"}},spellCheck:{defaultValue:{value:"true"},description:"Включение проверки орфографии",name:"spellCheck",required:!1,type:{name:"boolean"}},tabIndex:{defaultValue:null,description:"HTML-аттрибут tab-index",name:"tabIndex",required:!1,type:{name:"number"}},onFocus:{defaultValue:null,description:"Колбек получения фокуса",name:"onFocus",required:!1,type:{name:"FocusEventHandler<HTMLTextAreaElement>"}},onBlur:{defaultValue:null,description:"Колбек потери фокуса",name:"onBlur",required:!1,type:{name:"FocusEventHandler<HTMLTextAreaElement>"}},onChange:{defaultValue:null,description:"Колбек смены значения",name:"onChange",required:!1,type:{name:"((value: string, e: ChangeEvent<HTMLTextAreaElement>) => void)"}},onKeyDown:{defaultValue:null,description:"Колбек нажатия клавиши клавиатуры",name:"onKeyDown",required:!1,type:{name:"KeyboardEventHandler<HTMLTextAreaElement>"}},disabled:{defaultValue:{value:"false"},description:"Является ли поле деактивированным",name:"disabled",required:!1,type:{name:"boolean"}},value:{defaultValue:{value:""},description:"HTML-аттрибут value",name:"value",required:!1,type:{name:"string"}},readonly:{defaultValue:{value:"false"},description:"Является ли поле доступным только на чтение",name:"readonly",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"Плейсхолдер",name:"placeholder",required:!1,type:{name:"string"}},maxLength:{defaultValue:null,description:"Максимальное кол-во символов",name:"maxLength",required:!1,type:{name:"number"}},autoComplete:{defaultValue:{value:"false"},description:"Включен ли автокомплит",name:"autoComplete",required:!1,type:{name:"boolean"}},minRows:{defaultValue:{value:"3"},description:"Минимальное кол-во строк, до которого размер поля может быть увеличен",name:"minRows",required:!1,type:{name:"number"}}}}}catch{}const Pu="_container_146qi_1",$u="_scrollContainer_146qi_9",Ku="_textarea_146qi_20",Ou="_postfix_146qi_24",S={container:Pu,scrollContainer:$u,textarea:Ku,postfix:Ou},O=o.forwardRef(({id:t,name:u,value:e,placeholder:a,maxLength:n,minRows:f=3,maxRows:i=1e3,disabled:s=!1,resizable:d=!1,readonly:r=!1,showCopyButton:p=!0,showClearButton:E=!0,allowMoreThanMaxLength:B=!0,showHintIcon:v,onChange:y,onFocus:g,onBlur:h,onKeyDown:C,className:b,label:m,labelTooltip:F,labelTooltipPlacement:A,required:c=!1,caption:R,hint:G,error:_,size:D=fu.S,validationState:U=Eu.Default,onCopyButtonClick:X,footer:w,spellCheck:J,autoFocus:Q,...uu},eu)=>{const q=o.useRef(null),au=o.useRef(null),tu=o.useRef(null),z=!r&&!s&&d,[V="",M]=Cu({value:e,defaultValue:"",onChange:y}),nu=p&&!!V&&!s&&r,ru=E&&!!V&&!s&&!r,N=pu({validationState:U,error:_}),I=Fu({clearButtonRef:au,showClearButton:ru,size:D,onClear:()=>{var T;M(""),c&&((T=q.current)==null||T.focus())}}),k=yu({copyButtonRef:tu,showCopyButton:nu,size:D,valueToCopy:V,onCopyButtonClick:X}),{postfixButtons:lu,inputTabIndex:ou,onInputKeyDown:iu}=Au({inputRef:q,postfixButtons:o.useMemo(()=>[I,k],[I,k]),readonly:r,submitKeys:["Enter","Space","Tab"]}),su=T=>{iu(T),C==null||C(T)};return x.jsx(cu,{className:b,label:m,labelTooltip:F,labelTooltipPlacement:A,labelFor:t,required:c,caption:R,length:n?{max:n,current:V.length}:void 0,hint:G,disabled:s,readonly:r,showHintIcon:v,size:D,error:_,validationState:N,...Y(uu),children:x.jsxs(xu,{className:S.container,size:D,validationState:N,disabled:s,readonly:r,"data-resizable":z||void 0,"data-actions":!!w||void 0,variant:mu.MultiLine,style:{"--max-rows":i,"--min-rows":f},inputRef:q,postfix:x.jsx("span",{className:S.postfix,children:lu}),children:[x.jsx(bu,{className:S.scrollContainer,size:"s",barHideStrategy:"never",resize:z?"vertical":"none","data-test-id":"field-textarea__scroll-area",children:x.jsx(L,{className:S.textarea,"data-size":D,value:V,onChange:M,placeholder:a,disabled:s,readonly:r,minRows:f,id:t,name:u,ref:du(eu,q),onFocus:g,onBlur:h,onKeyDown:su,tabIndex:ou,spellCheck:J,autoFocus:Q,maxLength:B?void 0:n||void 0,"data-test-id":"field-textarea__input"})}),w]})})});try{O.displayName="FieldTextArea",O.__docgenInfo={description:"",displayName:"FieldTextArea",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},minRows:{defaultValue:{value:"3"},description:"Минимальное кол-во строк, до которого размер поля может быть увеличен",name:"minRows",required:!1,type:{name:"number"}},maxRows:{defaultValue:{value:"1000"},description:"Максимальное кол-во строк, до которого размер поля может быть увеличен",name:"maxRows",required:!1,type:{name:"number"}},resizable:{defaultValue:{value:"false"},description:"Может ли ли пользователь изменять размеры поля (если св-во не включено, поле автоматически меняет свой размер)",name:"resizable",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"Колбек смены значения",name:"onChange",required:!1,type:{name:"((value: string, e?: ChangeEvent<HTMLTextAreaElement>) => void)"}},showCopyButton:{defaultValue:null,description:"Отображение кнопки Копировать для поля (актуально только для `readonly = true`)",name:"showCopyButton",required:!1,type:{name:"boolean"}},onCopyButtonClick:{defaultValue:null,description:"Колбек клика по кнопке Копировать для поля",name:"onCopyButtonClick",required:!1,type:{name:"(() => void)"}},showClearButton:{defaultValue:{value:"true"},description:"Отображение кнопки очистки поля",name:"showClearButton",required:!1,type:{name:"boolean"}},allowMoreThanMaxLength:{defaultValue:{value:"true"},description:"Можно ли вводить больше разрешённого кол-ва символов",name:"allowMoreThanMaxLength",required:!1,type:{name:"boolean"}},footer:{defaultValue:null,description:"Нода под футер",name:"footer",required:!1,type:{name:"ReactNode"}},value:{defaultValue:null,description:"HTML-аттрибут value",name:"value",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"HTML-аттрибут id",name:"id",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"HTML-аттрибут name",name:"name",required:!1,type:{name:"string"}},autoFocus:{defaultValue:null,description:"Включен ли авто-фокус",name:"autoFocus",required:!1,type:{name:"boolean"}},spellCheck:{defaultValue:{value:"true"},description:"Включение проверки орфографии",name:"spellCheck",required:!1,type:{name:"boolean"}},onFocus:{defaultValue:null,description:"Колбек получения фокуса",name:"onFocus",required:!1,type:{name:"FocusEventHandler<HTMLTextAreaElement>"}},onBlur:{defaultValue:null,description:"Колбек потери фокуса",name:"onBlur",required:!1,type:{name:"FocusEventHandler<HTMLTextAreaElement>"}},onKeyDown:{defaultValue:null,description:"Колбек нажатия клавиши клавиатуры",name:"onKeyDown",required:!1,type:{name:"KeyboardEventHandler<HTMLTextAreaElement>"}},disabled:{defaultValue:{value:"false"},description:"Является ли поле деактивированным",name:"disabled",required:!1,type:{name:"boolean"}},readonly:{defaultValue:{value:"false"},description:"Является ли поле доступным только на чтение",name:"readonly",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"Плейсхолдер",name:"placeholder",required:!1,type:{name:"string"}},maxLength:{defaultValue:null,description:"Максимальное кол-во символов",name:"maxLength",required:!1,type:{name:"number"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},caption:{defaultValue:null,description:"Подпись справа от лейбла",name:"caption",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"Лейбл",name:"label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"s"},description:"Размер",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'},{value:'"l"'}]}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},labelTooltip:{defaultValue:null,description:"Всплывающая подсказка лейбла",name:"labelTooltip",required:!1,type:{name:"ReactNode"}},required:{defaultValue:{value:"false"},description:"Является ли поле обязательным",name:"required",required:!1,type:{name:"boolean"}},hint:{defaultValue:null,description:"Подсказка внизу",name:"hint",required:!1,type:{name:"string"}},showHintIcon:{defaultValue:null,description:"Отображать иконку подсказки",name:"showHintIcon",required:!1,type:{name:"boolean"}},validationState:{defaultValue:{value:"default"},description:"Состояние валидации",name:"validationState",required:!1,type:{name:"enum",value:[{value:'"error"'},{value:'"warning"'},{value:'"success"'},{value:'"default"'}]}},labelTooltipPlacement:{defaultValue:{value:"top"},description:"Расположение подсказки лейбла",name:"labelTooltipPlacement",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"left-start"'},{value:'"left-end"'},{value:'"right"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"top"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom"'},{value:'"bottom-start"'},{value:'"bottom-end"'}]}}}}}catch{}export{O as F};
