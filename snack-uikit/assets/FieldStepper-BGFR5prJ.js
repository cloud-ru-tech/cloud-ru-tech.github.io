import{j as u}from"./jsx-runtime-BTJTZTIL.js";import{c as N}from"./index-DUmpqB7p.js";import{m as iu}from"./index-B7wZyJkK.js";import{r as d}from"./index-CJ_LmFaV.js";import{S as ou}from"./constants-9uwKbtvo.js";import{F as pu,g as du,C as fu,V as mu}from"./FieldDecorator-C5NteYAG.js";import{P as cu}from"./index-CwHIobxP.js";import{M as Fu}from"./index-3XDw48l5.js";import{u as Eu}from"./LocaleProvider-CyhbxqE1.js";import{u as vu}from"./useValueControl-CNLw7ht-.js";import{u as Du,a as Bu}from"./usePrefix-BmEKZSSL.js";import{e as hu}from"./componentPropsProcessors-UJEZy8aQ.js";import{T as _}from"./Tooltip-DzAF_V2U.js";import{F as bu}from"./FieldContainerPrivate-FMwqMCEU.js";import{I as Vu}from"./InputPrivate-DKsi1bc7.js";import{B as q}from"./ButtonFunction-C3V72H94.js";const _u="_stepper_bu7sr_1",gu="_button_bu7sr_5",yu="_trigger_bu7sr_12",Au="_wrap_bu7sr_16",Iu="_prefixWrapper_bu7sr_23",xu="_postfixWrapper_bu7sr_27",o={stepper:_u,button:gu,trigger:yu,wrap:Au,prefixWrapper:Iu,postfixWrapper:xu},Cu=2e3,Nu=(p,f)=>p>0?p:f<0?f:0,qu={s:8,m:9,l:10},S=d.forwardRef(({id:p,name:f,value:w,min:a=Number.NEGATIVE_INFINITY,max:t=Number.POSITIVE_INFINITY,plusButtonTooltip:l,minusButtonTooltip:n,step:D=1,disabled:r=!1,readonly:s=!1,allowMoreThanLimits:g=!0,onChange:P,onFocus:B,onBlur:h,className:T,label:j,labelTooltip:M,labelTooltipPlacement:R,required:W=!1,caption:O,hint:L,showHintIcon:H,size:m=ou.S,validationState:k=mu.Default,error:y,prefix:K,postfix:G,autoFocus:Y,...$},z)=>{const{t:A}=Eu("Fields"),[i=0,c]=vu({value:w,defaultValue:Nu(a,t),onChange:P}),[U,b]=d.useState(!1),[Z,F]=d.useState(""),V=d.useRef(),I=d.useRef(null),J=typeof a=="number"&&i<=a||s||r,Q=typeof t=="number"&&i>=t||s||r,E=Du({prefix:K,disabled:r}),v=Bu({postfix:G,disabled:r}),x=du({validationState:k,error:y}),C=e=>{c(e),b(!0),V.current=setTimeout(()=>{b(!1),F("")},Cu)};d.useEffect(()=>()=>{clearTimeout(V.current)},[]);const X=e=>{g||(t!==void 0&&i>t&&(F(`${A("limitTooltip.max")}${t}`),C(t)),a!==void 0&&i<a&&(F(`${A("limitTooltip.min")}${a}`),C(a))),h==null||h(e)},uu=e=>{clearTimeout(V.current),b(!1),F(""),B==null||B(e)},eu=(e,su)=>c(Number(e),su),au=()=>{},tu=e=>{e.preventDefault(),e.stopPropagation(),c(Math.min(Math.max(a,i-D),t))},ru=e=>{e.preventDefault(),e.stopPropagation(),c(Math.max(Math.min(t,i+D),a))},lu=()=>{},nu=()=>{};return u.jsx(pu,{className:T,label:j,labelTooltip:M,labelTooltipPlacement:R,labelFor:p,required:W,caption:O,hint:L,disabled:r,readonly:s,showHintIcon:H,size:m,validationState:x,error:y,...hu($),children:u.jsx(_,{tip:Z,open:g?!1:U,"data-test-id":"field-stepper__limit-tooltip",triggerClassName:o.trigger,children:u.jsx(bu,{size:m,validationState:x,disabled:r,readonly:s,variant:fu.SingleLine,inputRef:I,prefix:u.jsx(_,{...n,open:n?n==null?void 0:n.open:!1,tip:n==null?void 0:n.tip,"data-test-id":"field-stepper__minus-button-tooltip",children:u.jsx(q,{tabIndex:-1,size:"xs",className:o.button,icon:u.jsx(Fu,{}),onClick:tu,onKeyDown:lu,disabled:J,"data-test-id":"field-stepper__minus-button"})}),postfix:u.jsx(_,{...l,open:l?l==null?void 0:l.open:!1,tip:l==null?void 0:l.tip,"data-test-id":"field-stepper__plus-button-tooltip",children:u.jsx(q,{tabIndex:-1,size:"xs",className:o.button,icon:u.jsx(cu,{}),onClick:ru,onKeyDown:nu,disabled:Q,"data-test-id":"field-stepper__plus-button"})}),children:u.jsxs("div",{className:o.wrap,children:[u.jsx("div",{className:N({[o.prefixWrapper]:E.show}),children:E.show&&E.render({key:E.id})}),u.jsx("div",{style:{width:String(i).length*qu[m],maxWidth:"100%"},children:u.jsx(Vu,{ref:iu(z,I),className:o.stepper,"data-size":m,value:String(i),tabIndex:0,onKeyDown:au,onChange:eu,onBlur:X,onFocus:uu,disabled:r,readonly:s,type:"number",id:p,step:D,name:f,min:a,max:t,autoFocus:Y,"data-test-id":"field-stepper__input"})}),u.jsx("div",{className:N({[o.postfixWrapper]:v.show}),children:v.show&&v.render({key:v.id})})]})})})})});try{S.displayName="FieldStepper",S.__docgenInfo={description:"",displayName:"FieldStepper",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"Значение поля",name:"value",required:!1,type:{name:"number"}},onChange:{defaultValue:null,description:"Колбек смены значения",name:"onChange",required:!1,type:{name:"((value: number, e?: ChangeEvent<HTMLInputElement>) => void)"}},step:{defaultValue:{value:"1"},description:"Шаг поля",name:"step",required:!1,type:{name:"number"}},allowMoreThanLimits:{defaultValue:{value:"true"},description:"Можно ли вводить c клавиатуры числа, выходящие за пределы min/max",name:"allowMoreThanLimits",required:!1,type:{name:"boolean"}},prefix:{defaultValue:null,description:"Произвольный префикс для поля",name:"prefix",required:!1,type:{name:"ReactNode"}},postfix:{defaultValue:null,description:"Произвольный постфикс для поля",name:"postfix",required:!1,type:{name:"ReactNode"}},plusButtonTooltip:{defaultValue:null,description:"Тултип над кнопкой увеличения значения",name:"plusButtonTooltip",required:!1,type:{name:"TooltipProps"}},minusButtonTooltip:{defaultValue:null,description:"Тултип над кнопкой уменьшения значения",name:"minusButtonTooltip",required:!1,type:{name:"TooltipProps"}},id:{defaultValue:null,description:"Значение html-атрибута id",name:"id",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"Значение html-атрибута name",name:"name",required:!1,type:{name:"string"}},autoFocus:{defaultValue:{value:"false"},description:"Включен ли авто-фокус для поля",name:"autoFocus",required:!1,type:{name:"boolean"}},onFocus:{defaultValue:null,description:"Колбек обработки получения фокуса",name:"onFocus",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},onBlur:{defaultValue:null,description:"Колбек обработки потери фокуса",name:"onBlur",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},disabled:{defaultValue:{value:"false"},description:"Является ли поле деактивированным",name:"disabled",required:!1,type:{name:"boolean"}},max:{defaultValue:{value:"Number.POSITIVE_INFINITY"},description:"Максимальное значение поля",name:"max",required:!1,type:{name:"number"}},min:{defaultValue:{value:"Number.NEGATIVE_INFINITY"},description:"Минимальное значение поля",name:"min",required:!1,type:{name:"number"}},readonly:{defaultValue:{value:"false"},description:"Является ли поле доступным только для чтения",name:"readonly",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},caption:{defaultValue:null,description:"Подпись справа от лейбла",name:"caption",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"Лейбл",name:"label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"s"},description:"Размер",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'},{value:'"l"'}]}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},labelTooltip:{defaultValue:null,description:"Всплывающая подсказка лейбла",name:"labelTooltip",required:!1,type:{name:"ReactNode"}},required:{defaultValue:{value:"false"},description:"Является ли поле обязательным",name:"required",required:!1,type:{name:"boolean"}},hint:{defaultValue:null,description:"Подсказка внизу",name:"hint",required:!1,type:{name:"string"}},showHintIcon:{defaultValue:null,description:"Отображать иконку подсказки",name:"showHintIcon",required:!1,type:{name:"boolean"}},validationState:{defaultValue:{value:"default"},description:"Состояние валидации",name:"validationState",required:!1,type:{name:"enum",value:[{value:'"error"'},{value:'"warning"'},{value:'"success"'},{value:'"default"'}]}},labelTooltipPlacement:{defaultValue:{value:"top"},description:"Расположение подсказки лейбла",name:"labelTooltipPlacement",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"left-start"'},{value:'"left-end"'},{value:'"right"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"top"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom"'},{value:'"bottom-start"'},{value:'"bottom-end"'}]}}}}}catch{}export{S as F};
