import{j as e}from"./jsx-runtime-BTJTZTIL.js";import{r as p}from"./index-CJ_LmFaV.js";import{e as A,c as I,a as U,b as z,h as q,f as S,g as K,s as W,S as R,N as $}from"./styles.module-FYPR1w3o.js";import{c as V}from"./index-DUmpqB7p.js";import{S as J}from"./Skeleton-Cf0sBfNU.js";import{T as Q}from"./Tooltip-DzAF_V2U.js";import{D as Y}from"./DropList-14nWaAbO.js";import{B as M}from"./ButtonSimple-CGcaE0QJ.js";import{T as X}from"./Tag-yVyxCmhe.js";import{K as Z}from"./index-CIcT2jya.js";import{S as N}from"./SkeletonText-DP-re6Ou.js";import{I as ee}from"./index-D6D9ztaz.js";import{T as C}from"./Typography-DmSN6cv6.js";import{e as L}from"./componentPropsProcessors-UJEZy8aQ.js";import{T as te}from"./TruncateString-BMtbUp3O.js";import{B as ne}from"./ButtonFunction-Cq7vLCCS.js";import{S as ue}from"./SegmentedControl-CEHLKZL9.js";import{S as ie}from"./Scroll-CyeY1SIb.js";import{W as ae}from"./WithSkeleton-BvFnKWIX.js";import{P as oe}from"./index-C9_U387z.js";import"./index-ChsGqxH_.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-C-NxZ9RO.js";import"./ButtonTonal-BG3mK6UO.js";import"./utils-Cqi5js5s.js";import"./Counter-DXWSEFY6.js";import"./Sun-CjKF0Bsh.js";import"./constants-BAH7I9kc.js";import"./Link-pGxtuN_f.js";import"./helpers-CVfYthkf.js";import"./index-Bxu_udwM.js";import"./index-DdXvKv-Q.js";import"./index-Chjiymov.js";import"./index-Bx6tewuM.js";import"./index-BQAaeyfQ.js";import"./ProgressBar-TiBN-Oau.js";import"./index-6PN_JoHT.js";import"./index-zbp_5bxn.js";import"./LocaleProvider-B4VrUkyw.js";import"./isBrowser-C2N6XvuH.js";import"./PopoverPrivate-CnKgsFAm.js";import"./index-JZGyZbA2.js";import"./useIsomorphicLayoutEffect-BAXQmlEq.js";import"./index-B7wZyJkK.js";import"./hooks-DW3Ay30h.js";import"./useValueControl-CNLw7ht-.js";import"./Checkbox-CTtQUi_B.js";import"./constants-BObEONKm.js";import"./TogglePrivate-BTSew7b5.js";import"./index-3XDw48l5.js";import"./index-DtRrUciF.js";import"./Switch-CtcsAMzA.js";import"./Dropdown-4YXb2YvP.js";import"./index-DLGJiw2b.js";import"./index-Baw9oej9.js";import"./Divider-C1X9zrkx.js";import"./Spinner-PYn9r2mo.js";import"./useButtonNavigation-CVCsehRW.js";import"./useClearButton-CBEN1tav.js";import"./constants-9uwKbtvo.js";import"./InputPrivate-DKsi1bc7.js";import"./constants-BaREPXw5.js";import"./IconPredefined-DVxQYij_.js";import"./ButtonFilled-B00ZQJkg.js";const f={title:"notification-panel__title",segments:"notification-panel__segments",settings:{droplist:"notification-panel__settings__droplist",droplistTrigger:"notification-panel__settings__droplist-trigger",droplistAction:"notification-panel__settings__droplist-action"},readAll:"notification-panel__readAll",footerButton:"notification-panel__footerButton",skeleton:"notification-panel__skeleton"};function re(){return e.jsxs("div",{className:A.notificationCard,"data-test-id":f.skeleton,"data-skeleton":!0,children:[e.jsx(N,{width:140,typography:"label-s",lines:1}),e.jsxs("div",{className:A.notificationCardTitle,"data-center":!0,children:[e.jsx("div",{className:A.notificationCardTitleIcon,children:e.jsx(N,{width:16,typography:"title-s",lines:1})}),e.jsx(N,{width:140,typography:"title-s",lines:1})]}),e.jsx("div",{className:A.notificationCardContent,children:e.jsx(N,{lines:3,typography:"body-s"})}),e.jsxs("div",{className:A.notificationCardFooter,children:[e.jsx(N,{width:140,typography:"body-s",lines:1}),e.jsx(N,{width:140,typography:"label-s",lines:1})]})]})}function v({actions:t,button:n}){const[u,o]=p.useState(!1);return e.jsx(Y,{trigger:"clickAndFocusVisible",open:u,onOpenChange:o,scroll:!0,placement:"bottom-end","data-test-id":f.settings.droplist,items:t.map(({icon:c,content:P,tagLabel:s,disabled:d,onClick:_})=>({onClick:y=>{o(!1),_==null||_(y)},disabled:d,content:P,beforeContent:c,afterContent:s?e.jsx(X,{label:s}):void 0,"data-test-id":f.settings.droplistAction})),children:e.jsx(M,{...n})})}try{v.displayName="NotificationPanelSettingsDroplist",v.__docgenInfo={description:"",displayName:"NotificationPanelSettingsDroplist",props:{actions:{defaultValue:null,description:"",name:"actions",required:!0,type:{name:"Action[]"}},button:{defaultValue:null,description:"",name:"button",required:!0,type:{name:"ButtonSimpleProps"}}}}}catch{}function k({actions:t,button:n}){const u={...n,size:"s",icon:n.icon||e.jsx(Z,{}),"data-test-id":f.settings.droplistTrigger};return t!=null&&t.length?e.jsx(v,{actions:t,button:u}):e.jsx(M,{...u})}try{k.displayName="NotificationPanelSettings",k.__docgenInfo={description:"",displayName:"NotificationPanelSettings",props:{actions:{defaultValue:null,description:"Дополнительные действия панели",name:"actions",required:!1,type:{name:"Action[]"}},button:{defaultValue:null,description:"Кнопка дополнительного действия панели",name:"button",required:!0,type:{name:'Omit<ButtonSimpleProps, "data-test-id" | "label" | "size" | "type">'}}}}}catch{}const le="_notificationPanelBlank_16cox_1",se={notificationPanelBlank:le};function T({icon:t,className:n,...u}){return e.jsx(e.Fragment,{children:e.jsx(ee,{...u,icon:t?{...t,appearance:t.appearance??"neutral"}:void 0,size:"l",align:"vertical",className:V(se.notificationPanelBlank,n)})})}try{T.displayName="NotificationPanelBlank",T.__docgenInfo={description:'Компонента для "заглушки" вместо карточек в панели',displayName:"NotificationPanelBlank",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"Заголовок",name:"title",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"Подзаголовок",name:"description",required:!1,type:{name:"ReactNode"}},icon:{defaultValue:null,description:"Иконка",name:"icon",required:!1,type:{name:'Pick<IconPredefinedProps, "appearance" | "icon" | "decor">'}}}}}catch{}const de="_notificationPanelDivider_ly8gg_1",ce={notificationPanelDivider:de};function j({text:t,className:n,...u}){return e.jsx(C.LightLabelS,{className:V(ce.notificationPanelDivider,n),...L(u),children:t})}try{j.displayName="NotificationPanelDivider",j.__docgenInfo={description:"Разделитель для группировки или разделения карточек в списке",displayName:"NotificationPanelDivider",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},text:{defaultValue:null,description:"Текст разделителя",name:"text",required:!0,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}function b({tooltip:t,children:n}){return t?e.jsx(Q,{...t,children:n}):n}try{b.displayName="WithTooltip",b.__docgenInfo={description:"",displayName:"WithTooltip",props:{tooltip:{defaultValue:null,description:"",name:"tooltip",required:!1,type:{name:"TooltipProps"}}}}}catch{}const pe="_notificationPanelHeader_1l3te_1",me="_notificationPanelHeaderFunctions_1l3te_22",fe="_notificationPanelHeadline_1l3te_28",_e="_notificationPanelTitle_1l3te_35",ge="_notificationPanelBody_1l3te_40",ye="_notificationPanelFooterButton_1l3te_49",Ee="_wrapper_1l3te_87",Ne="_scrollStub_1l3te_96",Pe="_notificationPanelHeaderActions_1l3te_102",l={notificationPanelHeader:pe,notificationPanelHeaderFunctions:me,notificationPanelHeadline:fe,notificationPanelTitle:_e,notificationPanelBody:ge,notificationPanelFooterButton:ye,wrapper:Ee,scrollStub:Ne,notificationPanelHeaderActions:Pe};function a({title:t,settings:n,segments:u,readAllButton:o,footerButton:c,content:P,loading:s,skeletonsAmount:d=2,scrollEndRef:_,scrollContainerRef:y,className:x,...E}){const g=p.useMemo(()=>Array.from({length:d},(r,B)=>B),[d]);return e.jsxs("div",{className:V(l.wrapper,x),...L(E),children:[e.jsxs("div",{className:l.notificationPanelHeader,children:[e.jsxs("div",{className:l.notificationPanelHeadline,children:[e.jsx(C.SansHeadlineS,{className:l.notificationPanelTitle,children:e.jsx(te,{text:t,"data-test-id":f.title})}),e.jsxs("div",{className:l.notificationPanelHeaderActions,children:[o&&e.jsx(b,{tooltip:o.tooltip,children:e.jsx(ne,{...o,onClick:o.onClick,size:"xs",disabled:o.disabled||s,"data-test-id":f.readAll})}),n&&e.jsx(k,{...n})]})]}),e.jsx("div",{className:l.notificationPanelHeaderFunctions,children:u&&e.jsx("div",{className:l.notificationPanelChips,children:e.jsx(ue,{...u,size:"s",items:u.items.map(r=>({...r,disabled:r.disabled||s})),"data-test-id":f.segments})})})]}),e.jsxs(ie,{size:"m",className:l.notificationPanelBody,ref:y,children:[P,s&&e.jsx(J,{loading:s||!1,children:g.map(r=>e.jsx(ae,{skeleton:e.jsx(re,{})},r))}),e.jsx("div",{className:l.scrollStub,ref:_})]}),c&&e.jsx("button",{type:"button",onClick:c.onClick,className:l.notificationPanelFooterButton,"data-test-id":f.footerButton,children:e.jsx(C.SansLabelS,{children:c.label})})]})}(t=>{t.Blank=T,t.Divider=j})(a||(a={}));try{a.displayName="NotificationPanel",a.__docgenInfo={description:"Компонент панели для уведомлений",displayName:"NotificationPanel",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"Заголовок панели",name:"title",required:!0,type:{name:"string"}},settings:{defaultValue:null,description:"Кнопка настроек и выпадающий список",name:"settings",required:!1,type:{name:"NotificationPanelSettingsProps"}},segments:{defaultValue:null,description:"Сегменты для фильтрации",name:"segments",required:!1,type:{name:'Omit<SegmentedControlProps, "data-test-id" | "size">'}},readAllButton:{defaultValue:null,description:'Кнопка в "шапке" панели',name:"readAllButton",required:!1,type:{name:'(Omit<ButtonFunctionProps, "data-test-id"> & { tooltip?: TooltipProps; })'}},footerButton:{defaultValue:null,description:"Кнопка внизу панели",name:"footerButton",required:!1,type:{name:"{ label: string; onClick: MouseEventHandler<HTMLButtonElement>; }"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},loading:{defaultValue:null,description:"Состояние загрузки",name:"loading",required:!1,type:{name:"boolean"}},content:{defaultValue:null,description:"Контент для отрисовки (e.g NotificationCard | NotificationPanel.Blank)",name:"content",required:!1,type:{name:"ReactNode"}},skeletonsAmount:{defaultValue:{value:"2"},description:"Количество скелетонов карточек для отображения при загрузке",name:"skeletonsAmount",required:!1,type:{name:"number"}},scrollEndRef:{defaultValue:null,description:"Ссылка на элемент, обозначающий самый конец прокручиваемого списка",name:"scrollEndRef",required:!1,type:{name:"RefObject<HTMLDivElement>"}},scrollContainerRef:{defaultValue:null,description:"Ссылка на контейнер, который скроллится",name:"scrollContainerRef",required:!1,type:{name:"RefObject<HTMLElement>"}}}}}catch{}try{a.Blank.displayName="NotificationPanel.Blank",a.Blank.__docgenInfo={description:"",displayName:"NotificationPanel.Blank",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"Заголовок",name:"title",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"Подзаголовок",name:"description",required:!1,type:{name:"ReactNode"}},icon:{defaultValue:null,description:"Иконка",name:"icon",required:!1,type:{name:'Pick<IconPredefinedProps, "appearance" | "icon" | "decor">'}}}}}catch{}try{a.Divider.displayName="NotificationPanel.Divider",a.Divider.__docgenInfo={description:"",displayName:"NotificationPanel.Divider",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},text:{defaultValue:null,description:"Текст разделителя",name:"text",required:!0,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const jt={title:"Components/Notification",component:a},m={All:"All",Unread:"Unread"},Ae=({amount:t,readAllButton:n,segments:u,footerButton:o,loading:c,showDivider:P,...s})=>{const[d,_]=p.useState(m.All),[y,x]=p.useState(!1),E=p.useMemo(()=>K(t),[t]),g=p.useMemo(()=>d===m.Unread?E.filter(i=>i.unread):y?E.map(i=>({...i,unread:!1})):E.sort((i,h)=>Number(h.unread??0)-Number(i.unread??0)),[y,d,E]),r=p.useMemo(()=>({notRead:g.filter(i=>i.unread),read:g.filter(i=>!i.unread)}),[g]),B=!g.length&&!c,G=()=>{x(i=>!i)},D=i=>i.map(h=>p.createElement($,{...h,"data-test-id":R.card,key:h.id}));return e.jsx("div",{className:W.pageWrapper,"data-resizable":!0,children:e.jsx(a,{...s,readAllButton:n&&{...n,onClick:G},segments:u&&{...u,value:d,onChange:i=>{_(String(i))}},loading:c,content:e.jsxs(e.Fragment,{children:[B&&e.jsx(a.Blank,{icon:{icon:oe},title:"No notifications",description:`Here you will see new event notifications
when something happens`,"data-test-id":R.blank}),!B&&e.jsx(e.Fragment,{children:P&&d===m.All?e.jsxs(e.Fragment,{children:[D(r.notRead),!!(r.notRead.length&&r.read.length)&&e.jsx(a.Divider,{text:"Readed"}),D(r.read)]}):D(g)})]}),footerButton:o&&{...o,onClick(){}}})})},F={render:Ae,args:{...S,segments:{items:[{value:m.All,label:m.All,counter:{value:S.amount}},{value:m.Unread,label:m.Unread,counter:{value:S.amount}}],value:m.All},settings:{button:{onClick(){}},actions:[{content:{option:"setting 1"},onClick:q},{content:{option:"setting 2"},onClick:q}]},showDivider:!1},argTypes:{amount:{name:"[Stories]: Amount of cards in the panel",control:{type:"range",min:0,max:100,step:1}},showDivider:{name:"[Stories]: Show divider after unread cards"}},parameters:{readme:{sidebar:[`Latest version: ${I.version}`,U,z]},packageName:I.name,design:{name:"Figma",type:"figma",url:"https://www.figma.com/file/jtGxAPvFJOMir7V0eQFukN/Snack-UI-Kit-1.1.0?node-id=41%3A209587&mode=design"}}};var O,w,H;F.parameters={...F.parameters,docs:{...(O=F.parameters)==null?void 0:O.docs,source:{originalSource:`{
  render: Template,
  args: {
    ...NOTIFICATION_PANEL_PROPS_MOCK,
    segments: {
      items: [{
        value: SEGMENT_FILTER.All,
        label: SEGMENT_FILTER.All,
        counter: {
          value: NOTIFICATION_PANEL_PROPS_MOCK.amount
        }
      }, {
        value: SEGMENT_FILTER.Unread,
        label: SEGMENT_FILTER.Unread,
        counter: {
          value: NOTIFICATION_PANEL_PROPS_MOCK.amount
        }
      }],
      value: SEGMENT_FILTER.All
    },
    settings: {
      button: {
        onClick() {}
      },
      actions: [{
        content: {
          option: 'setting 1'
        },
        onClick: handleActionClick
      }, {
        content: {
          option: 'setting 2'
        },
        onClick: handleActionClick
      }]
    },
    showDivider: false
  },
  argTypes: {
    amount: {
      name: '[Stories]: Amount of cards in the panel',
      control: {
        type: 'range',
        min: 0,
        max: 100,
        step: 1
      }
    },
    showDivider: {
      name: '[Stories]: Show divider after unread cards'
    }
  },
  parameters: {
    readme: {
      sidebar: [\`Latest version: \${componentPackage.version}\`, componentReadme, componentChangelog]
    },
    packageName: componentPackage.name,
    design: {
      name: 'Figma',
      type: 'figma',
      url: 'https://www.figma.com/file/jtGxAPvFJOMir7V0eQFukN/Snack-UI-Kit-1.1.0?node-id=41%3A209587&mode=design'
    }
  }
}`,...(H=(w=F.parameters)==null?void 0:w.docs)==null?void 0:H.source}}};export{jt as default,F as notificationPanel};
