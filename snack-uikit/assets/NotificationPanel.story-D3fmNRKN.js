import{j as e}from"./jsx-runtime-BTJTZTIL.js";import{r as p}from"./index-CJ_LmFaV.js";import{e as P,c as I,a as U,b as z,h as q,f as S,g as K,s as W,S as R,N as $}from"./styles.module-DEnhkXCO.js";import{c as V}from"./index-DUmpqB7p.js";import{S as J}from"./Skeleton-Cf0sBfNU.js";import{T as Q}from"./Tooltip-DzAF_V2U.js";import{D as Y}from"./DropList-BeTwO9JS.js";import{B as H}from"./ButtonSimple-BlHO0UW0.js";import{T as X}from"./Tag-Dyz5wRNP.js";import{K as Z}from"./index-B80hK4m0.js";import{S as N}from"./SkeletonText-IBa0zlgv.js";import{I as ee}from"./index-BhVwnnbR.js";import{T as C}from"./Typography-COVcnQ5F.js";import{e as L}from"./componentPropsProcessors-UJEZy8aQ.js";import{T as te}from"./TruncateString-BMtbUp3O.js";import{B as ne}from"./ButtonFunction-DO8-q7Gq.js";import{S as ue}from"./SegmentedControl-CEHLKZL9.js";import{S as ie}from"./Scroll-CyeY1SIb.js";import{W as ae}from"./WithSkeleton-BvFnKWIX.js";import{P as oe}from"./index-CTTgWa-s.js";import"./index-ChsGqxH_.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-CAfvFIBF.js";import"./ButtonTonal-BOArSFPu.js";import"./utils-CWv1hTMo.js";import"./Counter-DXWSEFY6.js";import"./Sun-CjKF0Bsh.js";import"./constants-BAH7I9kc.js";import"./Link-D1V5U7hr.js";import"./helpers-MlN6OFO3.js";import"./index-Bxu_udwM.js";import"./index-DdXvKv-Q.js";import"./index-Chjiymov.js";import"./index-DreyRvUE.js";import"./index-DHAmGKAZ.js";import"./ProgressBar-TiBN-Oau.js";import"./index-Dn6vuaYJ.js";import"./index-DbF-M2Rm.js";import"./LocaleProvider-B4VrUkyw.js";import"./isBrowser-C2N6XvuH.js";import"./PopoverPrivate-CnKgsFAm.js";import"./index-JZGyZbA2.js";import"./useIsomorphicLayoutEffect-BAXQmlEq.js";import"./index-B7wZyJkK.js";import"./hooks-DON7lT9t.js";import"./useValueControl-CNLw7ht-.js";import"./Checkbox-B-86ZbLV.js";import"./constants-BObEONKm.js";import"./TogglePrivate-BTSew7b5.js";import"./index-w0WAZL2A.js";import"./index-Y3TRpJ-L.js";import"./Switch-Cq7kjPHZ.js";import"./Dropdown-4YXb2YvP.js";import"./index-C3mvkShn.js";import"./index-CXJdfWGn.js";import"./Divider-C1X9zrkx.js";import"./Spinner-PYn9r2mo.js";import"./useButtonNavigation-CVCsehRW.js";import"./useClearButton-CAlOraVE.js";import"./constants-9uwKbtvo.js";import"./InputPrivate-alc9Nisi.js";import"./constants-BaREPXw5.js";import"./IconPredefined-DVxQYij_.js";import"./ButtonFilled-pGiP3SQa.js";const f={title:"notification-panel__title",segments:"notification-panel__segments",settings:{droplist:"notification-panel__settings__droplist",droplistTrigger:"notification-panel__settings__droplist-trigger",droplistAction:"notification-panel__settings__droplist-action"},readAll:"notification-panel__readAll",footerButton:"notification-panel__footerButton",skeleton:"notification-panel__skeleton"};function re(){return e.jsxs("div",{className:P.notificationCard,"data-test-id":f.skeleton,"data-skeleton":!0,children:[e.jsx(N,{width:140,typography:"label-s",lines:1}),e.jsxs("div",{className:P.notificationCardTitle,"data-center":!0,children:[e.jsx("div",{className:P.notificationCardTitleIcon,children:e.jsx(N,{width:16,typography:"title-s",lines:1})}),e.jsx(N,{width:140,typography:"title-s",lines:1})]}),e.jsx("div",{className:P.notificationCardContent,children:e.jsx(N,{lines:3,typography:"body-s"})}),e.jsxs("div",{className:P.notificationCardFooter,children:[e.jsx(N,{width:140,typography:"body-s",lines:1}),e.jsx(N,{width:140,typography:"label-s",lines:1})]})]})}function v({actions:t,button:n}){const[u,o]=p.useState(!1);return e.jsx(Y,{trigger:"clickAndFocusVisible",open:u,onOpenChange:o,scroll:!0,placement:"bottom-end","data-test-id":f.settings.droplist,items:t.map(({icon:d,content:A,tagLabel:l,disabled:s,onClick:_})=>({onClick:y=>{o(!1),_==null||_(y)},disabled:s,content:A,beforeContent:d,afterContent:l?e.jsx(X,{label:l}):void 0,"data-test-id":f.settings.droplistAction})),children:e.jsx(H,{...n})})}try{v.displayName="NotificationPanelSettingsDroplist",v.__docgenInfo={description:"",displayName:"NotificationPanelSettingsDroplist",props:{actions:{defaultValue:null,description:"",name:"actions",required:!0,type:{name:"Action[]"}},button:{defaultValue:null,description:"",name:"button",required:!0,type:{name:"ButtonSimpleProps"}}}}}catch{}function k({actions:t,button:n}){const u={...n,size:"s",icon:n.icon||e.jsx(Z,{}),"data-test-id":f.settings.droplistTrigger};return t!=null&&t.length?e.jsx(v,{actions:t,button:u}):e.jsx(H,{...u})}try{k.displayName="NotificationPanelSettings",k.__docgenInfo={description:"",displayName:"NotificationPanelSettings",props:{actions:{defaultValue:null,description:"Дополнительные действия панели",name:"actions",required:!1,type:{name:"Action[]"}},button:{defaultValue:null,description:"Кнопка дополнительного действия панели",name:"button",required:!0,type:{name:'Omit<ButtonSimpleProps, "data-test-id" | "size" | "label" | "type">'}}}}}catch{}const le="_notificationPanelBlank_16cox_1",se={notificationPanelBlank:le};function T({icon:t,className:n,...u}){return e.jsx(e.Fragment,{children:e.jsx(ee,{...u,icon:t?{...t,appearance:t.appearance??"neutral"}:void 0,size:"l",align:"vertical",className:V(se.notificationPanelBlank,n)})})}try{T.displayName="NotificationPanelBlank",T.__docgenInfo={description:'Компонента для "заглушки" вместо карточек в панели',displayName:"NotificationPanelBlank",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"Заголовок",name:"title",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"Подзаголовок",name:"description",required:!1,type:{name:"ReactNode"}},icon:{defaultValue:null,description:"Иконка",name:"icon",required:!1,type:{name:'Pick<IconPredefinedProps, "icon" | "appearance" | "decor">'}}}}}catch{}const de="_notificationPanelDivider_ly8gg_1",ce={notificationPanelDivider:de};function j({text:t,className:n,...u}){return e.jsx(C.LightLabelS,{className:V(ce.notificationPanelDivider,n),...L(u),children:t})}try{j.displayName="NotificationPanelDivider",j.__docgenInfo={description:"Разделитель для группировки или разделения карточек в списке",displayName:"NotificationPanelDivider",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},text:{defaultValue:null,description:"Текст разделителя",name:"text",required:!0,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}function b({tooltip:t,children:n}){return t?e.jsx(Q,{...t,children:n}):n}try{b.displayName="WithTooltip",b.__docgenInfo={description:"",displayName:"WithTooltip",props:{tooltip:{defaultValue:null,description:"",name:"tooltip",required:!1,type:{name:"TooltipProps"}}}}}catch{}const pe="_notificationPanelHeader_16670_1",me="_notificationPanelHeadline_16670_22",fe="_notificationPanelTitle_16670_29",_e="_notificationPanelBody_16670_34",ge="_notificationPanelFooterButton_16670_43",ye="_wrapper_16670_81",Ee="_scrollStub_16670_90",Ne="_notificationPanelHeaderActions_16670_96",c={notificationPanelHeader:pe,notificationPanelHeadline:me,notificationPanelTitle:fe,notificationPanelBody:_e,notificationPanelFooterButton:ge,wrapper:ye,scrollStub:Ee,notificationPanelHeaderActions:Ne};function a({title:t,settings:n,segments:u,readAllButton:o,footerButton:d,content:A,loading:l,skeletonsAmount:s=2,scrollEndRef:_,scrollContainerRef:y,className:D,...E}){const g=p.useMemo(()=>Array.from({length:s},(r,B)=>B),[s]);return e.jsxs("div",{className:V(c.wrapper,D),...L(E),children:[e.jsxs("div",{className:c.notificationPanelHeader,children:[e.jsxs("div",{className:c.notificationPanelHeadline,children:[e.jsx(C.SansHeadlineS,{className:c.notificationPanelTitle,children:e.jsx(te,{text:t,"data-test-id":f.title})}),e.jsxs("div",{className:c.notificationPanelHeaderActions,children:[o&&e.jsx(b,{tooltip:o.tooltip,children:e.jsx(ne,{...o,onClick:o.onClick,size:"xs",disabled:o.disabled||l,"data-test-id":f.readAll})}),n&&e.jsx(k,{...n})]})]}),e.jsx("div",{children:u&&e.jsx(ue,{...u,size:"s",items:u.items.map(r=>({...r,disabled:r.disabled||l})),"data-test-id":f.segments})})]}),e.jsxs(ie,{size:"m",className:c.notificationPanelBody,ref:y,children:[A,l&&e.jsx(J,{loading:l||!1,children:g.map(r=>e.jsx(ae,{skeleton:e.jsx(re,{})},r))}),e.jsx("div",{className:c.scrollStub,ref:_})]}),d&&e.jsx("button",{type:"button",onClick:d.onClick,className:c.notificationPanelFooterButton,"data-test-id":f.footerButton,children:e.jsx(C.SansLabelS,{children:d.label})})]})}(t=>{t.Blank=T,t.Divider=j})(a||(a={}));try{a.displayName="NotificationPanel",a.__docgenInfo={description:"Компонент панели для уведомлений",displayName:"NotificationPanel",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"Заголовок панели",name:"title",required:!0,type:{name:"string"}},settings:{defaultValue:null,description:"Кнопка настроек и выпадающий список",name:"settings",required:!1,type:{name:"NotificationPanelSettingsProps"}},segments:{defaultValue:null,description:"Сегменты для фильтрации",name:"segments",required:!1,type:{name:'Omit<SegmentedControlProps, "data-test-id" | "size">'}},readAllButton:{defaultValue:null,description:'Кнопка в "шапке" панели',name:"readAllButton",required:!1,type:{name:'(Omit<ButtonFunctionProps, "data-test-id"> & { tooltip?: TooltipProps; })'}},footerButton:{defaultValue:null,description:"Кнопка внизу панели",name:"footerButton",required:!1,type:{name:"{ label: string; onClick: MouseEventHandler<HTMLButtonElement>; }"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},loading:{defaultValue:null,description:"Состояние загрузки",name:"loading",required:!1,type:{name:"boolean"}},content:{defaultValue:null,description:"Контент для отрисовки (e.g NotificationCard | NotificationPanel.Blank)",name:"content",required:!1,type:{name:"ReactNode"}},skeletonsAmount:{defaultValue:{value:"2"},description:"Количество скелетонов карточек для отображения при загрузке",name:"skeletonsAmount",required:!1,type:{name:"number"}},scrollEndRef:{defaultValue:null,description:"Ссылка на элемент, обозначающий самый конец прокручиваемого списка",name:"scrollEndRef",required:!1,type:{name:"RefObject<HTMLDivElement>"}},scrollContainerRef:{defaultValue:null,description:"Ссылка на контейнер, который скроллится",name:"scrollContainerRef",required:!1,type:{name:"RefObject<HTMLElement>"}}}}}catch{}try{a.Blank.displayName="NotificationPanel.Blank",a.Blank.__docgenInfo={description:"",displayName:"NotificationPanel.Blank",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"Заголовок",name:"title",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"Подзаголовок",name:"description",required:!1,type:{name:"ReactNode"}},icon:{defaultValue:null,description:"Иконка",name:"icon",required:!1,type:{name:'Pick<IconPredefinedProps, "icon" | "appearance" | "decor">'}}}}}catch{}try{a.Divider.displayName="NotificationPanel.Divider",a.Divider.__docgenInfo={description:"",displayName:"NotificationPanel.Divider",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},text:{defaultValue:null,description:"Текст разделителя",name:"text",required:!0,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const Tt={title:"Components/Notification",component:a},m={All:"All",Unread:"Unread"},Ae=({amount:t,readAllButton:n,segments:u,footerButton:o,loading:d,showDivider:A,...l})=>{const[s,_]=p.useState(m.All),[y,D]=p.useState(!1),E=p.useMemo(()=>K(t),[t]),g=p.useMemo(()=>s===m.Unread?E.filter(i=>i.unread):y?E.map(i=>({...i,unread:!1})):E.sort((i,h)=>Number(h.unread??0)-Number(i.unread??0)),[y,s,E]),r=p.useMemo(()=>({notRead:g.filter(i=>i.unread),read:g.filter(i=>!i.unread)}),[g]),B=!g.length&&!d,G=()=>{D(i=>!i)},x=i=>i.map(h=>p.createElement($,{...h,"data-test-id":R.card,key:h.id}));return e.jsx("div",{className:W.pageWrapper,"data-resizable":!0,children:e.jsx(a,{...l,readAllButton:n&&{...n,onClick:G},segments:u&&{...u,value:s,onChange:i=>{_(String(i))}},loading:d,content:e.jsxs(e.Fragment,{children:[B&&e.jsx(a.Blank,{icon:{icon:oe},title:"No notifications",description:`Here you will see new event notifications
when something happens`,"data-test-id":R.blank}),!B&&e.jsx(e.Fragment,{children:A&&s===m.All?e.jsxs(e.Fragment,{children:[x(r.notRead),!!(r.notRead.length&&r.read.length)&&e.jsx(a.Divider,{text:"Readed"}),x(r.read)]}):x(g)})]}),footerButton:o&&{...o,onClick(){}}})})},F={render:Ae,args:{...S,segments:{items:[{value:m.All,label:m.All,counter:{value:S.amount}},{value:m.Unread,label:m.Unread,counter:{value:S.amount}}],value:m.All},settings:{button:{onClick(){}},actions:[{content:{option:"setting 1"},onClick:q},{content:{option:"setting 2"},onClick:q}]},showDivider:!1},argTypes:{amount:{name:"[Stories]: Amount of cards in the panel",control:{type:"range",min:0,max:100,step:1}},showDivider:{name:"[Stories]: Show divider after unread cards"}},parameters:{readme:{sidebar:[`Latest version: ${I.version}`,U,z]},packageName:I.name,design:{name:"Figma",type:"figma",url:"https://www.figma.com/file/jtGxAPvFJOMir7V0eQFukN/Snack-UI-Kit-1.1.0?node-id=41%3A209587&mode=design"}}};var O,w,M;F.parameters={...F.parameters,docs:{...(O=F.parameters)==null?void 0:O.docs,source:{originalSource:`{
  render: Template,
  args: {
    ...NOTIFICATION_PANEL_PROPS_MOCK,
    segments: {
      items: [{
        value: SEGMENT_FILTER.All,
        label: SEGMENT_FILTER.All,
        counter: {
          value: NOTIFICATION_PANEL_PROPS_MOCK.amount
        }
      }, {
        value: SEGMENT_FILTER.Unread,
        label: SEGMENT_FILTER.Unread,
        counter: {
          value: NOTIFICATION_PANEL_PROPS_MOCK.amount
        }
      }],
      value: SEGMENT_FILTER.All
    },
    settings: {
      button: {
        onClick() {}
      },
      actions: [{
        content: {
          option: 'setting 1'
        },
        onClick: handleActionClick
      }, {
        content: {
          option: 'setting 2'
        },
        onClick: handleActionClick
      }]
    },
    showDivider: false
  },
  argTypes: {
    amount: {
      name: '[Stories]: Amount of cards in the panel',
      control: {
        type: 'range',
        min: 0,
        max: 100,
        step: 1
      }
    },
    showDivider: {
      name: '[Stories]: Show divider after unread cards'
    }
  },
  parameters: {
    readme: {
      sidebar: [\`Latest version: \${componentPackage.version}\`, componentReadme, componentChangelog]
    },
    packageName: componentPackage.name,
    design: {
      name: 'Figma',
      type: 'figma',
      url: 'https://www.figma.com/file/jtGxAPvFJOMir7V0eQFukN/Snack-UI-Kit-1.1.0?node-id=41%3A209587&mode=design'
    }
  }
}`,...(M=(w=F.parameters)==null?void 0:w.docs)==null?void 0:M.source}}};export{Tt as default,F as notificationPanel};
