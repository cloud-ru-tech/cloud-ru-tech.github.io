import{j as m}from"./jsx-runtime-BTJTZTIL.js";import{a as _u}from"./chunk-D5ZWXAHU-Dm3eDOzv.js";import{r as u}from"./index-CJ_LmFaV.js";import{c as O,a as qu,b as ku,C as xu,s as Nu}from"./styles.module-C6VSrpUS.js";import{m as Ru}from"./index-B7wZyJkK.js";import{u as Hu}from"./index-JZGyZbA2.js";import{S as j,I as K}from"./constants-9uwKbtvo.js";import{u as Mu,r as Lu}from"./useButtonNavigation-CVCsehRW.js";import{F as Ou,g as ju,C as Ku,V as Pu}from"./FieldDecorator-DME35q0M.js";import{f as Gu}from"./index-jnMETbXV.js";import{u as Uu}from"./useClearButton-B39o1uTp.js";import{u as $u}from"./useCopyButton-7U8jQ3tg.js";import{u as zu,S as P,a as G,b as Ju,D as g,T as U}from"./useHandlers-CSVwMbx9.js";import{e as Qu}from"./componentPropsProcessors-UJEZy8aQ.js";import{D as Yu}from"./Dropdown-DW3sYUoc.js";import{F as Zu}from"./FieldContainerPrivate-Bb7j8Eum.js";import{I as Wu}from"./InputPrivate-CThf6NgV.js";import{T as Xu}from"./TimePicker-BH-xJ6NT.js";import"./index-ChsGqxH_.js";import"./v4-CtRu48qb.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-B3PncWT3.js";import"./Sprite-DoNyyhE0.js";import"./sprite.symbol-DpN2ERsh.js";import"./index-DOUS9uWn.js";import"./index-CO8qBMZD.js";import"./index-CF-13Pl-.js";import"./index-DhD2neKD.js";import"./index-B_0qYnTb.js";import"./index-CQc5r4_Q.js";import"./index-DOM9zHVr.js";import"./index-CoIthjug.js";import"./index-CAYnss5D.js";import"./index-DmfNrAq3.js";import"./index-nGp8qeK-.js";import"./index-9wvJTAiE.js";import"./index-CNFM3LCz.js";import"./index-DnTCD4Me.js";import"./index-euh5MKXp.js";import"./index-K_J-hwcf.js";import"./index-B4f8p1mq.js";import"./index-C0OXG0Ut.js";import"./index-DYaIcqfi.js";import"./index-CU6E9CWM.js";import"./index-Cz4dqGWG.js";import"./index-BaJp5iwV.js";import"./index-CV7xtGUY.js";import"./index-BAKe6VtV.js";import"./index-CDvcICra.js";import"./index-Dj3Kdo0x.js";import"./PopoverPrivate-CnKgsFAm.js";import"./index-Bxu_udwM.js";import"./index-DdXvKv-Q.js";import"./index-DUmpqB7p.js";import"./isBrowser-C2N6XvuH.js";import"./useIsomorphicLayoutEffect-BAXQmlEq.js";import"./TruncateString-NSjc3XzO.js";import"./Tooltip-C67siN8J.js";import"./index-DTH25FFD.js";import"./TimePickerBase-BVAqe34A.js";import"./hooks-D1n50Nla.js";import"./useValueControl-C51frgGe.js";import"./Checkbox-BPp2F_B8.js";import"./constants-BObEONKm.js";import"./TogglePrivate-BTSew7b5.js";import"./Switch-Ct9nJb3P.js";import"./LocaleProvider-CyhbxqE1.js";import"./index-D-5xGnYw.js";import"./IconPredefined-FEPQkyLi.js";import"./Typography-WZPdBQao.js";import"./ButtonTonal-YV7IKDPs.js";import"./utils-DzobPs8h.js";import"./Counter-CRGhF3Kb.js";import"./Sun-WJ2YftH0.js";import"./constants-BAH7I9kc.js";import"./ButtonFilled-BLfaiW75.js";import"./Divider-C1X9zrkx.js";import"./Spinner-DA8AR1nX.js";import"./Scroll-B3e6J9cA.js";import"./ButtonFunction-DNxi1ZK7.js";import"./List-kHspEBId.js";const ue="_triggerClassName_tm7if_1",ee="_container_tm7if_7",te="_calendarIcon_tm7if_7",T={triggerClassName:ue,container:ee,calendarIcon:te},I=(n,{showSeconds:p,locale:o})=>{if(!n)return"";const t=new Date;return t.setHours(n.hours??0),t.setMinutes(n.minutes??0),t.setSeconds(n.seconds??0),t.toLocaleTimeString(o,{hour:"numeric",minute:"numeric",second:p?"numeric":void 0})},C=u.forwardRef(({id:n,name:p,value:o,disabled:t=!1,readonly:r=!1,showCopyButton:F=!0,showClearButton:A=!0,open:f,onOpenChange:c,onChange:B,onFocus:v,onBlur:Q,className:Y,label:Z,labelTooltip:W,labelTooltipPlacement:X,required:h=!1,caption:uu,hint:eu,showHintIcon:tu,showSeconds:d=!0,size:l=j.S,validationState:au=Pu.Default,error:V,onCopyButtonClick:nu,autoFocus:ou,...ru},lu)=>{const[b,i]=Hu(f,!1,c),a=u.useRef(null),iu=u.useRef(null),su=u.useRef(null),w=l===j.S?K.Xs:K.S,S=b&&!r&&!t,_=!!(o&&!t),mu=A&&_&&!r,pu=F&&_&&r,q=ju({validationState:au,error:V}),k=u.useRef(null),x=u.useCallback(e=>{e.key==="ArrowDown"&&(i(!0),setTimeout(()=>{var s;return(s=k.current)==null?void 0:s.focus()},0))},[i]),cu=u.useCallback(()=>{var e,s,L;B&&B(void 0),(e=a.current)!=null&&e.value&&(a.current.value=""),h?((s=a.current)==null||s.focus(),i(!0)):((L=a.current)==null||L.blur(),i(!1))},[B,h,i]),du=I(o,{showSeconds:d,locale:g}),N=Uu({clearButtonRef:iu,showClearButton:mu,size:l,onClear:cu}),R=$u({copyButtonRef:su,showCopyButton:pu,size:l,valueToCopy:du,onCopyButtonClick:nu}),H=u.useMemo(()=>({active:!1,show:!0,id:"watchIcon",render:e=>m.jsx(Gu,{...e,size:w,className:T.calendarIcon,"data-size":l})}),[w,l]),fu=u.useMemo(()=>[N,R,H],[N,R,H]),{value:Bu,handleChange:Fu,handleClick:M,handleKeyDown:vu,handleBlur:Eu,mask:gu,setInputFocus:E}=zu({inputRef:a,onChange:B,readonly:r,locale:g,setIsOpen:i,mode:d?U.FullTime:U.NoSeconds,showSeconds:d}),yu=u.useCallback(()=>E(P.Seconds),[E]),{postfixButtons:Cu,inputTabIndex:Au,onInputKeyDown:hu,setInitialTabIndices:bu}=Mu({setInputFocus:yu,inputRef:a,postfixButtons:fu,onButtonKeyDown:x,readonly:r,submitKeys:["Enter","Space","Tab"]}),Du=e=>{var s;B&&B(e),(s=a.current)==null||s.focus(),i(!1),a.current&&(a.current.value=I(e,{showSeconds:d,locale:g}))},Tu=()=>{bu(),Lu(()=>{E(P.Hours),i(!1)})},Iu=G([x,vu,hu]);u.useEffect(()=>{var e;f&&((e=a.current)==null||e.focus())},[f]),u.useEffect(()=>{a.current&&document.activeElement!==a.current&&(a.current.value=I(o,{showSeconds:d,locale:g}))},[d,o]);const Vu=u.useCallback(e=>{E(),v==null||v(e)},[v,E]),D=Ju({onFocusByClick:v,onFocusByKeyboard:Vu}),wu=G([Eu,D.onBlur,Q]),Su=u.useCallback(e=>{M(),b&&e.stopPropagation()},[M,b]);return m.jsx(Ou,{className:Y,label:Z,labelTooltip:W,labelTooltipPlacement:X,labelFor:n,required:h,caption:uu,hint:eu,disabled:t,readonly:r,showHintIcon:tu,size:l,error:V,validationState:q,...Qu(ru),children:m.jsx(Yu,{trigger:"click",triggerClassName:T.triggerClassName,widthStrategy:"auto",...r||t?{open:!1}:{open:S,onOpenChange:i},content:m.jsx(Xu,{size:l,value:o,onChangeValue:Du,navigationStartRef:k,onFocusLeave:Tu,"data-test-id":"field-time__timepicker",fitToContainer:!1,showSeconds:d}),children:m.jsx(Zu,{className:T.container,size:l,validationState:q,disabled:t,readonly:r,variant:Ku.SingleLine,focused:S,inputRef:a,postfix:Cu,children:m.jsx(Wu,{ref:Ru(lu,a),"data-size":l,value:Bu||"",placeholder:gu,onChange:Fu,onFocus:D.onFocus,onMouseDown:D.onMouseDown,onBlur:wu,onKeyDown:Iu,onClick:Su,disabled:t,readonly:r,tabIndex:Au,type:"text",inputMode:"numeric",id:n,name:p,autoFocus:ou,"data-test-id":"field-time__input"})})})})});try{C.displayName="FieldTime",C.__docgenInfo={description:"",displayName:"FieldTime",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},open:{defaultValue:null,description:"Открыт time-picker",name:"open",required:!1,type:{name:"boolean"}},onOpenChange:{defaultValue:null,description:"Колбек открытия пикера",name:"onOpenChange",required:!1,type:{name:"((value: boolean) => void)"}},value:{defaultValue:null,description:"Значение поля",name:"value",required:!1,type:{name:"TimeValue"}},onChange:{defaultValue:null,description:"Колбек смены значения",name:"onChange",required:!1,type:{name:"((value?: TimeValue) => void)"}},showCopyButton:{defaultValue:null,description:"Отображение кнопки копирования",name:"showCopyButton",required:!1,type:{name:"boolean"}},onCopyButtonClick:{defaultValue:null,description:"Колбек клика по кнопке Копировать для поля",name:"onCopyButtonClick",required:!1,type:{name:"(() => void)"}},showSeconds:{defaultValue:{value:"true"},description:"Показывать ли секунды",name:"showSeconds",required:!1,type:{name:"boolean"}},showClearButton:{defaultValue:{value:"true"},description:"Отображение кнопки Очистки поля",name:"showClearButton",required:!1,type:{name:"boolean"}},disabled:{defaultValue:{value:"false"},description:"Является ли поле деактивированным",name:"disabled",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"Значение html-атрибута name",name:"name",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"Значение html-атрибута id",name:"id",required:!1,type:{name:"string"}},onFocus:{defaultValue:null,description:"Колбек обработки получения фокуса",name:"onFocus",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},onBlur:{defaultValue:null,description:"Колбек обработки потери фокуса",name:"onBlur",required:!1,type:{name:"FocusEventHandler<HTMLInputElement>"}},autoFocus:{defaultValue:{value:"false"},description:"Включен ли авто-фокус для поля",name:"autoFocus",required:!1,type:{name:"boolean"}},readonly:{defaultValue:{value:"false"},description:"Является ли поле доступным только для чтения",name:"readonly",required:!1,type:{name:"boolean"}},size:{defaultValue:{value:"s"},description:"Размер",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'},{value:'"l"'}]}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"Лейбл",name:"label",required:!1,type:{name:"string"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},caption:{defaultValue:null,description:"Подпись справа от лейбла",name:"caption",required:!1,type:{name:"string"}},labelTooltip:{defaultValue:null,description:"Всплывающая подсказка лейбла",name:"labelTooltip",required:!1,type:{name:"ReactNode"}},required:{defaultValue:{value:"false"},description:"Является ли поле обязательным",name:"required",required:!1,type:{name:"boolean"}},labelTooltipPlacement:{defaultValue:{value:"top"},description:"Расположение подсказки лейбла",name:"labelTooltipPlacement",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"left-start"'},{value:'"left-end"'},{value:'"right"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"top"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom"'},{value:'"bottom-start"'},{value:'"bottom-end"'}]}},hint:{defaultValue:null,description:"Подсказка внизу",name:"hint",required:!1,type:{name:"string"}},validationState:{defaultValue:{value:"default"},description:"Состояние валидации",name:"validationState",required:!1,type:{name:"enum",value:[{value:'"error"'},{value:'"warning"'},{value:'"success"'},{value:'"default"'}]}},showHintIcon:{defaultValue:null,description:"Отображать иконку подсказки",name:"showHintIcon",required:!1,type:{name:"boolean"}}}}}catch{}const _4={title:"Components/Fields/Field Time",component:C},ae=({size:n,valueHours:p,valueMinutes:o,valueSeconds:t,...r})=>{const F=u.useMemo(()=>[p,o,t].every(c=>c===void 0||String(c)==="")?void 0:{hours:p,minutes:o,seconds:t},[p,o,t]),[A,f]=u.useState(F);return u.useEffect(()=>{f(F)},[F]),m.jsx("div",{className:Nu.wrapper,"data-size":n,children:m.jsx(C,{...r,size:n,value:A,onChange:c=>{_u("onChange")(c),f(c)}})})},y={render:ae,args:{id:"date",showSeconds:!0,readonly:!1,showCopyButton:!0,disabled:!1,autoFocus:!1,label:"Label text",labelTooltip:"Tooltip description",required:!1,caption:"Caption",hint:"Hint text",size:"s",validationState:"default",showClearButton:!0},argTypes:{...xu,prefixIcon:{table:{disable:!0}},value:{table:{disable:!0}},valueHours:{name:"[value] hours",control:{type:"number"}},valueMinutes:{name:"[value] minutes",control:{type:"number"}},valueSeconds:{name:"[value] seconds",control:{type:"number"}}},parameters:{readme:{sidebar:[`Latest version: ${O.version}`,qu,ku]},packageName:O.name,design:{name:"Figma",type:"figma",url:"https://www.figma.com/file/jtGxAPvFJOMir7V0eQFukN/Snack-UI-Kit-1.1.0?node-id=402%3A202402&mode=design"}}};var $,z,J;y.parameters={...y.parameters,docs:{...($=y.parameters)==null?void 0:$.docs,source:{originalSource:`{
  render: Template,
  args: {
    id: 'date',
    showSeconds: true,
    readonly: false,
    showCopyButton: true,
    disabled: false,
    autoFocus: false,
    label: 'Label text',
    labelTooltip: 'Tooltip description',
    required: false,
    caption: 'Caption',
    hint: 'Hint text',
    size: 's',
    validationState: 'default',
    showClearButton: true
  },
  argTypes: {
    ...COMMON_ARG_TYPES,
    prefixIcon: {
      table: {
        disable: true
      }
    },
    value: {
      table: {
        disable: true
      }
    },
    valueHours: {
      name: '[value] hours',
      control: {
        type: 'number'
      }
    },
    valueMinutes: {
      name: '[value] minutes',
      control: {
        type: 'number'
      }
    },
    valueSeconds: {
      name: '[value] seconds',
      control: {
        type: 'number'
      }
    }
  },
  parameters: {
    readme: {
      sidebar: [\`Latest version: \${componentPackage.version}\`, componentReadme, componentChangelog]
    },
    packageName: componentPackage.name,
    design: {
      name: 'Figma',
      type: 'figma',
      url: 'https://www.figma.com/file/jtGxAPvFJOMir7V0eQFukN/Snack-UI-Kit-1.1.0?node-id=402%3A202402&mode=design'
    }
  }
}`,...(J=(z=y.parameters)==null?void 0:z.docs)==null?void 0:J.source}}};export{_4 as default,y as fieldTime};
