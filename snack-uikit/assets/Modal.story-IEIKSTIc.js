import{j as u}from"./jsx-runtime-BTJTZTIL.js";import{r as y}from"./index-CJ_LmFaV.js";import{e as G,f as W,M as B,T as f,h as U,S as q,i as $,A as Y,c as w,a as J,b as K,d as I,D as t,j as k,k as A,g as H,P}from"./utils-ClQfkEvl.js";import{S as Q}from"./Spinner-DwtrFO2L.js";import{T}from"./TruncateString-BNfg88Kx.js";import{T as Z}from"./Typography-BBUdQtPc.js";import{L as X}from"./Link--JqqEBkk.js";import{B as h}from"./ButtonFilled-CcjMa1pd.js";import{B as uu}from"./ButtonOutline-CUsgTYuO.js";import{B as eu}from"./ButtonSimple-zsVQqtln.js";import"./index-ChsGqxH_.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-DUmpqB7p.js";import"./index-DdXvKv-Q.js";import"./index-Chjiymov.js";import"./componentPropsProcessors-UJEZy8aQ.js";import"./index-DHAmGKAZ.js";import"./IconPredefined-CdsMvCqQ.js";import"./QuestionTooltip-7EN26iz3.js";import"./index-JZGyZbA2.js";import"./PopoverPrivate-C4IEYshr.js";import"./index-Bxu_udwM.js";import"./isBrowser-C2N6XvuH.js";import"./useIsomorphicLayoutEffect-BAXQmlEq.js";import"./Tooltip-fOEkX7i0.js";import"./index-DBTBMFOQ.js";import"./Scroll-BdPcpp6T.js";import"./useModalOpenState-D-j7JjhK.js";import"./index-DgzWz_a-.js";import"./Sprite-DoNyyhE0.js";import"./sprite.symbol-DpN2ERsh.js";import"./index-CAfvFIBF.js";import"./index-BAKcRSlX.js";import"./index-DNCO-vcx.js";import"./index-Y3TRpJ-L.js";import"./index-DrT0s6v0.js";import"./index-Ca89sW9R.js";import"./index-C3mvkShn.js";import"./index-CGBRtoFy.js";import"./index-BGTKE3tV.js";import"./index-h0kOFyIh.js";import"./index-BfUMklLA.js";import"./index-B0xwoRpp.js";import"./index-B2h5DBoi.js";import"./index-5mF7KA5g.js";import"./index-WpT-B0mJ.js";import"./index-B_69vUNX.js";import"./index-B80hK4m0.js";import"./index-w0WAZL2A.js";import"./index-Dn6vuaYJ.js";import"./index-CTTgWa-s.js";import"./index-CF_OgQNJ.js";import"./index-CXJdfWGn.js";import"./index-x12pshUM.js";import"./index-CGSydWJd.js";import"./index-DbF-M2Rm.js";import"./constants-BAH7I9kc.js";import"./utils-dn11qwNX.js";import"./Counter-D8sCmdvq.js";import"./Sun-BLz2v2u6.js";const tu="_modalFooter_1dfoq_1",ou="_footerButton_1dfoq_1",nu="_loaderWrapper_1dfoq_5",g={modalFooter:tu,footerButton:ou,loaderWrapper:nu};function r({open:p,onClose:n,size:a=q.S,mode:v=U.Regular,align:C=Y.Default,title:o,titleTooltip:s,subtitle:m,picture:D,content:e,approveButton:x,cancelButton:i,additionalButton:l,disclaimer:d,truncate:c,className:z,loading:_,loadingState:S,...L}){const E=G({align:C,size:a}),b=W({align:C,size:a}),M=$({size:a,picture:D}),R=y.useMemo(()=>_?S?u.jsx(B.Body,{content:S,align:E.body}):u.jsx(B.Body,{content:u.jsx("div",{className:g.loaderWrapper,children:u.jsx(Q,{size:"m","data-test-id":f.loadingSpinner})}),align:E.body}):e?u.jsx(B.Body,{content:e,align:E.body}):null,[E.body,e,_,S]);return u.jsxs(B,{open:p,onClose:n,size:a,mode:v,className:z,...L,children:[u.jsx(B.Header,{title:u.jsx(T,{text:o,maxLines:(c==null?void 0:c.title)||1}),titleTooltip:s,subtitle:m?u.jsx(T,{text:m,maxLines:(c==null?void 0:c.subtitle)||2}):void 0,picture:M,align:E.header}),R,!_&&u.jsx(B.Footer,{actions:u.jsxs(u.Fragment,{children:[u.jsx(h,{appearance:"primary",...x,size:b,className:g.footerButton,"data-test-id":f.approveButton}),i&&u.jsx(uu,{appearance:"neutral",...i,size:b,className:g.footerButton,"data-test-id":f.cancelButton}),l&&u.jsx(eu,{appearance:"neutral",...l,size:b,className:g.footerButton,"data-test-id":f.additionalButton})]}),disclaimer:d&&u.jsxs(u.Fragment,{children:[u.jsx(Z.SansBodyS,{"data-test-id":f.disclaimerText,children:d.text}),d.link&&u.jsx(X,{...d.link,size:"s","data-test-id":f.disclaimerLink})]}),align:E.footer,className:g.modalFooter})]})}try{r.displayName="Modal",r.__docgenInfo={description:"",displayName:"Modal",props:{className:{defaultValue:null,description:"CSS-класс",name:"className",required:!1,type:{name:"string"}},open:{defaultValue:null,description:"Управляет состоянием показан/не показан.",name:"open",required:!0,type:{name:"boolean"}},closeOnPopstate:{defaultValue:null,description:"Закрывать при переходе по истории браузера",name:"closeOnPopstate",required:!1,type:{name:"boolean"}},"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},mode:{defaultValue:{value:"regular"},description:"Режим отображения модального окна:\n<br> - __`Regular`__ -  есть кнопка закрытия, клик на оверлей и нажатие кнопки `Esc` закрывают модалку\n<br> - __`Aggressive`__ - есть кнопка закрытия, но выключен клик на оверлей и не работает закрытие по клавише `Esc`\n<br> - __`Forced`__ - закрыть модальное окно можно только по нажатию на кнопку действия в нижней части",name:"mode",required:!1,type:{name:"enum",value:[{value:'"regular"'},{value:'"aggressive"'},{value:'"forced"'}]}},onClose:{defaultValue:null,description:"Колбек закрытия компонента.",name:"onClose",required:!0,type:{name:"() => void"}},title:{defaultValue:null,description:"Заголовок модального окна",name:"title",required:!0,type:{name:"string"}},titleTooltip:{defaultValue:null,description:"Всплывающая подсказка для заголовка",name:"titleTooltip",required:!1,type:{name:"ReactNode"}},subtitle:{defaultValue:null,description:"Подзаголовок",name:"subtitle",required:!1,type:{name:"string"}},content:{defaultValue:null,description:"Содержимое модального окна",name:"content",required:!1,type:{name:"ReactNode"}},approveButton:{defaultValue:null,description:"Основная кнопка действия",name:"approveButton",required:!0,type:{name:'Omit<ButtonFilledProps, "size" | "data-test-id">'}},cancelButton:{defaultValue:null,description:"Кнопка отмены",name:"cancelButton",required:!1,type:{name:'Omit<ButtonOutlineProps, "size" | "data-test-id">'}},additionalButton:{defaultValue:null,description:"Вторая кнопка действия",name:"additionalButton",required:!1,type:{name:'Omit<ButtonSimpleProps, "size" | "data-test-id">'}},disclaimer:{defaultValue:null,description:"Небольшой текст под кнопками футера с возможностью передать дополнительно ссылку",name:"disclaimer",required:!1,type:{name:'{ text: string; link?: PickLinkProps<LinkElement, "text" | "as">; }'}},truncate:{defaultValue:{value:"'{ <br>title: 1; <br>subtitle: 2; }'"},description:"Максимальное кол-во строк\n<br> - `title` - в заголовке\n<br> - `subtitle` - в подзаголовке",name:"truncate",required:!1,type:{name:"{ title?: number; subtitle?: number; } | undefined"}},loading:{defaultValue:null,description:"Управление состоянием загрузки",name:"loading",required:!1,type:{name:"boolean"}},loadingState:{defaultValue:null,description:"Содержимое состояния загрузки вместо спиннера по умолчанию",name:"loadingState",required:!1,type:{name:"ReactNode"}},size:{defaultValue:{value:"s"},description:"Размер",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'},{value:'"l"'}]}},align:{defaultValue:{value:"default"},description:"Выравнивание, для разных размеров доступны разные значения\n<br> для size=`s` - все\n<br> для size=`m` - align=`default | center`\n<br> для size=`l` - align=`default`",name:"align",required:!1,type:{name:"enum",value:[{value:'"vertical"'},{value:'"center"'},{value:'"default"'}]}},picture:{defaultValue:null,description:"Можно передать иконку из пакета `@snack-uikit/icon-predefined`, или путь к картинке и атрибут `alt`",name:"picture",required:!1,type:{name:"JSXElementConstructor<{ size?: number; className?: string; }> | ModalHeaderImage | undefined"}}}}}catch{}const au="_wrapper_13jwk_1",iu="_buttons_13jwk_14",j={wrapper:au,buttons:iu},{useArgs:ru}=__STORYBOOK_MODULE_PREVIEW_API__,f4={title:"Components/Modal",component:r},su=u.jsx("div",{"data-test-id":"modal__custom-loader",children:"Custom Loading..."}),lu=({showIcon:p,showImage:n,align:a,alignM:v,customLoadingState:C,...o})=>{const[s,m]=y.useState();y.useEffect(()=>{m(o.open?k:void 0)},[o.open]);const D=l=>{const d=l.currentTarget.getAttribute("data-test-id");d&&m(d.replace("open-",""))},e=()=>m(void 0),x=o.size===q.M?v:a,i=C?su:void 0;return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:j.wrapper,children:["Controlled:",u.jsx(h,{size:"m",label:"Open modal",onClick:D,"data-test-id":k})]}),u.jsx("div",{className:j.wrapper,children:u.jsxs("div",{className:j.buttons,children:["Examples:",Object.values(A).map(l=>u.jsx(h,{size:"m",label:`Open ${l}`,onClick:D,"data-test-id":`open-${l}`},l))]})}),u.jsx(r,{...o,align:x,picture:H({showImage:n,showIcon:p,icon:o.icon,picture:o.picture}),open:s===k,onClose:e,approveButton:{...o.approveButton,onClick:e},cancelButton:o.cancelButton?{...o.cancelButton,onClick:e}:void 0,additionalButton:o.additionalButton?{...o.additionalButton,onClick:e}:void 0,loadingState:i}),u.jsx(r,{...t,open:s===A.withIcon,picture:P.icon,onClose:e,approveButton:{...t.approveButton,onClick:e},cancelButton:{...t.cancelButton,onClick:e},additionalButton:{...t.additionalButton,onClick:e},loadingState:i}),u.jsx(r,{...t,open:s===A.withImage,picture:P.image,onClose:e,approveButton:{...t.approveButton,onClick:e},cancelButton:{...t.cancelButton,onClick:e},additionalButton:{...t.additionalButton,onClick:e},loadingState:i}),u.jsx(r,{...t,content:void 0,mode:"aggressive",open:s===A.aggressive,onClose:e,approveButton:{...t.approveButton,onClick:e},cancelButton:{...t.cancelButton,onClick:e},additionalButton:{...t.additionalButton,onClick:e},loadingState:i}),u.jsx(r,{...t,content:void 0,mode:"forced",open:s===A.forced,onClose:e,approveButton:{...t.approveButton,onClick:e},cancelButton:{...t.cancelButton,onClick:e},additionalButton:{...t.additionalButton,onClick:e},loadingState:i}),u.jsx(r,{title:"Удалить элемент?",subtitle:"После удаления элемента он станет недоступен",mode:"forced",open:s===A.deleteModal,onClose:e,approveButton:{label:"Удалить",appearance:"destructive",onClick:e},additionalButton:{label:"Отмена",onClick:e},loadingState:i})]})},F={render:lu,decorators:[p=>{const[n,a]=ru();return y.useEffect(()=>{(n.size!==q.S||n.showImage)&&a({showIcon:!1})},[a,n.showImage,n.size]),u.jsx(p,{...n})}],args:{...t,disclaimer:{text:"Disclaimer Text Written in no more than 2 lines",link:{text:"Link text",href:"#"}}},argTypes:{...I,showIcon:{...I.showIcon,if:{arg:"size",eq:"s"}},customLoadingState:{if:{arg:"loading",eq:!0},name:"[Stories] Custom loading state",type:"boolean"},loadingState:{table:{disable:!0}}},parameters:{readme:{sidebar:[`Latest version: ${w.version}`,J,K]},packageName:w.name,design:{name:"Figma",type:"figma",url:"https://www.figma.com/file/jtGxAPvFJOMir7V0eQFukN/Snack-UI-Kit-1.1.0?node-id=41%3A205426&mode=design"}}};var N,O,V;F.parameters={...F.parameters,docs:{...(N=F.parameters)==null?void 0:N.docs,source:{originalSource:`{
  render: Template,
  decorators: [(Story: StoryFn<StoryProps>) => {
    const [storyArgs, setStoryArgs] = useArgs<StoryProps>();
    useEffect(() => {
      if (storyArgs.size !== SIZE.S || storyArgs.showImage) {
        setStoryArgs({
          showIcon: false
        });
      }
    }, [setStoryArgs, storyArgs.showImage, storyArgs.size]);
    return <Story {...storyArgs} />;
  }],
  args: {
    ...DEFAULT_ARGS,
    disclaimer: {
      text: 'Disclaimer Text Written in no more than 2 lines',
      link: {
        text: 'Link text',
        href: '#'
      }
    }
  },
  argTypes: {
    ...ARG_TYPES,
    showIcon: {
      ...ARG_TYPES.showIcon,
      if: {
        arg: 'size',
        eq: 's'
      }
    },
    customLoadingState: {
      if: {
        arg: 'loading',
        eq: true
      },
      name: '[Stories] Custom loading state',
      type: 'boolean'
    },
    loadingState: {
      table: {
        disable: true
      }
    }
  },
  parameters: {
    readme: {
      sidebar: [\`Latest version: \${componentPackage.version}\`, componentReadme, componentChangelog]
    },
    packageName: componentPackage.name,
    design: {
      name: 'Figma',
      type: 'figma',
      url: 'https://www.figma.com/file/jtGxAPvFJOMir7V0eQFukN/Snack-UI-Kit-1.1.0?node-id=41%3A205426&mode=design'
    }
  }
}`,...(V=(O=F.parameters)==null?void 0:O.docs)==null?void 0:V.source}}};export{f4 as default,F as modal};
