"use strict";(()=>{(self.webpackChunkuikit_product=self.webpackChunkuikit_product||[]).push([[1600],{"./node_modules/.pnpm/css-loader@6.11.0_webpack@5.99.9_esbuild@0.25.12_/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[14].use[1]!./node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.3_webpack@5.99.9_esbuild@0.25.12_/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[14].use[2]!./packages/charts/src/components/InteractiveChart/styles.module.scss":((B,f,s)=>{s.d(f,{A:()=>P});var n=s("./node_modules/.pnpm/css-loader@6.11.0_webpack@5.99.9_esbuild@0.25.12_/node_modules/css-loader/dist/runtime/noSourceMaps.js"),x=s.n(n),l=s("./node_modules/.pnpm/css-loader@6.11.0_webpack@5.99.9_esbuild@0.25.12_/node_modules/css-loader/dist/runtime/api.js"),y=s.n(l),m=y()(x());m.push([B.id,".interactive-chart-wrapper .uplot{font-family:inherit;background-color:var(--sys-neutral-background1-level, #fdfdfd);padding:16px 0;border-radius:8px;color:var(--sys-neutral-text-main, #41424e)}.interactive-chart-wrapper .uplot .u-title{font-size:20px;text-align:unset;padding-left:24px}.interactive-chart-wrapper .u-hz .u-cursor-x,.interactive-chart-wrapper .u-vt .u-cursor-y,.interactive-chart-wrapper .u-hz .u-cursor-y,.interactive-chart-wrapper .u-vt .u-cursor-x{border-color:var(--sys-neutral-decor-default, #dde0ea)}.interactive-chart-wrapper .u-select{background-color:var(--sys-neutral-decor-disabled, #e6e8ef)}.interactive-chart-wrapper table .u-series .u-marker{width:16px;height:16px;border-radius:16px}",""]),m.locals={};const P=m}),"./packages/charts/src/components/InteractiveChart/InteractiveChart.tsx":((B,f,s)=>{s.d(f,{H:()=>z});var n=s("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js"),x=s("./node_modules/.pnpm/uplot@1.6.31/node_modules/uplot/dist/uPlot.min.css"),l=s("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.99.9_esbuild@0.25.12_/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),y=s.n(l),m=s("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.99.9_esbuild@0.25.12_/node_modules/style-loader/dist/runtime/styleDomAPI.js"),P=s.n(m),V=s("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.99.9_esbuild@0.25.12_/node_modules/style-loader/dist/runtime/insertBySelector.js"),w=s.n(V),K=s("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.99.9_esbuild@0.25.12_/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),j=s.n(K),S=s("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.99.9_esbuild@0.25.12_/node_modules/style-loader/dist/runtime/insertStyleElement.js"),G=s.n(S),k=s("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.99.9_esbuild@0.25.12_/node_modules/style-loader/dist/runtime/styleTagTransform.js"),te=s.n(k),W=s("./node_modules/.pnpm/css-loader@6.11.0_webpack@5.99.9_esbuild@0.25.12_/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[14].use[1]!./node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.3_webpack@5.99.9_esbuild@0.25.12_/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[14].use[2]!./packages/charts/src/components/InteractiveChart/styles.module.scss"),H={};H.styleTagTransform=te(),H.setAttributes=j(),H.insert=w().bind(null,"head"),H.domAPI=P(),H.insertStyleElement=G();var Ce=y()(W.A,H);const xe=W.A&&W.A.locals?W.A.locals:void 0;var se=s("./node_modules/.pnpm/classnames@2.5.1/node_modules/classnames/index.js"),oe=s.n(se),ne=s("./node_modules/.pnpm/lodash.merge@4.6.2/node_modules/lodash.merge/index.js"),le=s.n(ne),F=s("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),ae=s("./node_modules/.pnpm/uplot-react@1.2.2_react@18.2.0_uplot@1.6.31/node_modules/uplot-react/uplot-react.js"),re=s.n(ae),ie=s("./packages/utils/src/utils/extractSupportProps.ts"),g=s("./packages/charts/src/constants/colors.ts"),de=s("./node_modules/.pnpm/color@4.2.3/node_modules/color/index.js"),Z=s.n(de),X=s("./node_modules/.pnpm/uplot@1.6.31/node_modules/uplot/dist/uPlot.esm.js");function ce({gap:d=5,bodyMaxWidth:c=60,shadowWidth:r=3,computedColors:p}){const v=p[g.CH.ShadowColor],h=new(Z())(p[g.CH.LineColor]).alpha(.5).rgb().string();function _(e,t,o,i,a,u){e.beginPath(),e.moveTo(t+u,o),e.lineTo(t+i-u,o),e.quadraticCurveTo(t+i,o,t+i,o-u),e.lineTo(t+i,o+a+u),e.quadraticCurveTo(t+i,o+a,t+i-u,o+a),e.lineTo(t+u,o+a),e.quadraticCurveTo(t,o+a,t,o+a+u),e.lineTo(t,o-u),e.quadraticCurveTo(t,o,t+u,o),e.closePath(),e.fill()}function C(e){e.ctx.save();const t=r%2/2;e.ctx.translate(t,t);const[o,i]=e.series[0].idxs;for(let a=o;a<=i;a++){const u=e.scales.x.distr===2?a:e.data[0][a],E=e.data[1][a],M=e.data[2][a],D=e.data[3][a],U=e.data[4][a],Y=e.data[5][a],T=e.valToPos(u,"x",!0),L=e.valToPos(E,"y",!0),b=e.valToPos(M,"y",!0),O=e.valToPos(D,"y",!0),A=e.valToPos(U,"y",!0),R=e.valToPos(Y,"y",!0)-L,N=T-r/2,$=L,fe=e.bbox.width/(i-o+2),I=Math.min(c,fe-d);e.ctx.fillStyle=v,e.ctx.fillRect(Math.round(N),Math.round($),Math.round(r),Math.round(R)),e.ctx.fillRect(Math.round(T-I/4),Math.round($-r/2),Math.round(I/2),Math.round(r)),e.ctx.fillRect(Math.round(T-I/4),Math.round($+R-r/2),Math.round(I/2),Math.round(r));const q=A-b,ee=T-I/2,ye=b;Math.abs(q)>8&&(e.ctx.fillStyle=p==null?void 0:p[Object.values(g.hg)[a%Object.keys(g.hg).length]],_(e.ctx,Math.round(ee),Math.round(ye),Math.round(I),Math.round(q),8,!0,!0),e.ctx.fillStyle=h,e.ctx.fillRect(Math.round(ee),O-r/2,Math.round(I),Math.round(r)))}e.ctx.translate(-t,-t),e.ctx.restore()}return{opts:(e,t)=>{X.default.assign(t,{cursor:{points:{show:!1}}}),t.series.forEach(o=>{o.paths=()=>null,o.points={show:!1}})},hooks:{draw:C}}}function ue({className:d="",computedColors:c}){const r=new(Z())(c[g.CH.ColumnHighlightColor]).alpha(.5).rgb().string();let p,v,h;function _(e){p=e.under,v=e.over;const t=document.createElement("div");d&&t.classList.add(d),X.default.assign(t.style,{pointerEvents:"none",display:"none",position:"absolute",left:0,top:0,height:"100%",backgroundColor:r}),p.appendChild(t),e._highlightEl=t,v.addEventListener("mouseenter",()=>{t.style.display=null}),v.addEventListener("mouseleave",()=>{t.style.display="none"})}function C(e){if(h!==e.cursor.idx){h=e.cursor.idx;const t=e._highlightEl,o=e.scales.x.max-e.scales.x.min,i=e.bbox.width/o/devicePixelRatio,a=e.valToPos(h,"x")-i/2;t.style.transform="translateX("+Math.round(a)+"px)",t.style.width=Math.round(i)+"px"}}return{opts:(e,t)=>{X.default.assign(t,{cursor:{x:!1,y:!1}})},hooks:{init:_,setCursor:C}}}function me({className:d="",computedColors:c}){const r=c[g.CH.TooltipBackgroundColor],p=c[g.CH.TooltipColor];function v(_,C){const e=_.root.querySelector(".u-legend");e.classList.remove("u-inline"),d&&e.classList.add(d),X.default.assign(e.style,{borderRadius:"4px",textAlign:"left",pointerEvents:"none",display:"none",position:"absolute",left:0,top:0,zIndex:100,backgroundColor:r,color:p});const t=e.querySelectorAll(".u-marker");for(let i=0;i<t.length;i++)t[i].style.display="none";const o=_.over;o.style.overflow="visible",o.appendChild(e),o.addEventListener("mouseenter",()=>{e.style.display=null}),o.addEventListener("mouseleave",()=>{e.style.display="none"})}function h(_){const{left:C,top:e}=_.cursor,t=_.root.querySelector(".u-legend");t.style.transform="translate("+(C+15)+"px, "+e+"px)"}return{hooks:{init:v,setCursor:h}}}const pe=({computedColors:d})=>({id:"boxPlot",title:"Distribution of object predictions by bin",width:800,height:600,cursor:{drag:{x:!1,y:!1}},plugins:[ce({computedColors:d}),ue({computedColors:d}),me({computedColors:d})],series:[{label:"bin"},{label:"X1"},{label:"Q1"},{label:"Median"},{label:"Q3"},{label:"X2"}],scales:{x:{distr:2,time:!1,range:(c,r,p)=>[r-1,p+1]},y:{time:!1,auto:!0}},axes:[{label:"Bin Number",labelSize:30,stroke:"#808080",grid:{stroke:"rgba(128, 128, 128, 0.15)",width:1/devicePixelRatio}},{label:"Prediction",labelSize:30,stroke:"#808080",grid:{stroke:"rgba(128, 128, 128, 0.15)",width:1/devicePixelRatio}}]});function _e(d){const c=d.factor||.75;let r,p,v,h,_,C;function e(t,o,i,a,u,E){return t>a?(o=u,i=E):o<u?(o=u,i=u+t):i>E&&(i=E,o=E-t),[o,i]}return{hooks:{ready:t=>{r=t.scales.x.min,p=t.scales.x.max,v=t.scales.y.min,h=t.scales.y.max,_=p-r,C=h-v;const o=t.root.querySelector(".u-over"),i=o.getBoundingClientRect();o.addEventListener("mousedown",a=>{if(a.button==1){let M=function(b){b.preventDefault();const O=b.clientX,A=L*(O-U);t.setScale("x",{min:Y-A,max:T-A})},D=function(b){document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",D)};var u=M,E=D;a.preventDefault();const U=a.clientX,Y=t.scales.x.min,T=t.scales.x.max,L=t.posToVal(1,"x")-t.posToVal(0,"x");document.addEventListener("mousemove",M),document.addEventListener("mouseup",D)}}),o.addEventListener("wheel",a=>{a.preventDefault();const{left:u,top:E}=t.cursor,M=u/i.width,D=1-E/i.height,U=t.posToVal(u,"x"),Y=t.posToVal(E,"y"),T=t.scales.x.max-t.scales.x.min,L=t.scales.y.max-t.scales.y.min,b=a.deltaY<0?T*c:T/c;let O=U-M*b,A=O+b;[O,A]=e(b,O,A,_,r,p);const J=a.deltaY<0?L*c:L/c;let R=Y-D*J,N=R+J;[R,N]=e(J,R,N,C,v,h),t.batch(()=>{t.setScale("x",{min:O,max:A}),t.setScale("y",{min:R,max:N})})})}}}}const ve=({computedColors:d})=>{const c=new(Z())(d[g.CH.AxisColor]).alpha(.8).rgb().string(),r=d[g.CH.LabelColor];return{id:"defaultPlot",title:"Title",width:800,height:600,cursor:{drag:{x:!0,y:!0,dist:10,uni:10}},plugins:[_e({factor:.75})],series:[{label:"x"}],scales:{x:{time:!1,auto:!0},y:{time:!1,auto:!0}},axes:[{show:!0,label:"x",labelSize:30,stroke:r,grid:{stroke:c,width:1/devicePixelRatio}},{show:!0,label:"y",labelSize:30,stroke:r,grid:{stroke:c,width:1/devicePixelRatio}}]}};var Q=s("./packages/charts/src/components/InteractiveChart/constants.ts"),he=s("./packages/charts/src/components/InteractiveChart/hooks/useComputedColors.ts");function ge({type:d,computedColors:c}){switch(d){case Q.ov.BoxPlot:return pe({computedColors:c});case Q.ov.Default:default:return ve({computedColors:c})}}function z({data:d,options:c,type:r=Q.ov.Default,className:p,...v}){const h=(0,F.useMemo)(()=>Object.entries({...g._7,...g.Zb}).reduce((e,[t,o])=>(e[`--${t}`]=o,e),{}),[]),_=(0,he.R)(),C=(0,F.useMemo)(()=>le()({},ge({type:r,computedColors:_}),c),[_,c,r]);return(0,n.jsx)("div",{...(0,ie.z)(v),className:oe()(g.uy,p),style:h,children:(0,n.jsx)(re(),{options:C,data:d})})}try{z.displayName="InteractiveChart",z.__docgenInfo={description:"",displayName:"InteractiveChart",props:{"data-test-id":{defaultValue:null,description:"",name:"data-test-id",required:!1,type:{name:"string"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"AlignedData"}},options:{defaultValue:null,description:"",name:"options",required:!1,type:{name:"Partial<Options>"}},type:{defaultValue:{value:"default"},description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"boxPlot"'},{value:'"default"'}]}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["packages/charts/src/components/InteractiveChart/InteractiveChart.tsx#InteractiveChart"]={docgenInfo:z.__docgenInfo,name:"InteractiveChart",path:"packages/charts/src/components/InteractiveChart/InteractiveChart.tsx#InteractiveChart"})}catch(d){}}),"./packages/charts/src/components/InteractiveChart/constants.ts":((B,f,s)=>{s.d(f,{OR:()=>l,jk:()=>x,ov:()=>n});const n={BoxPlot:"boxPlot",Default:"default"},x={Linear:"linear",StepAfter:"stepAfter",StepBefore:"stepBefore",Spline:"spline"},l={Line:"line",Bars:"bars",Points:"points",BarsLeft:"barsLeft",BarsRight:"barsRight"}}),"./packages/charts/src/components/InteractiveChart/hooks/useComputedColors.ts":((B,f,s)=>{s.d(f,{R:()=>P});var n=s("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),x=s("./packages/utils/src/hooks/useTheme.ts"),l=s("./node_modules/.pnpm/@snack-uikit+utils@3.7.0_react@18.2.0/node_modules/@snack-uikit/utils/dist/esm/hooks/useIsomorphicLayoutEffect.js"),y=s("./packages/charts/src/constants/colors.ts");const m={};function P(){const{theme:V}=(0,x.D)(),[w,K]=(0,n.useState)(m);return(0,l.N)(()=>{const j=document.querySelector("."+y.uy);if(!j)return;const S=getComputedStyle(j);K(Object.values({...y.hg,...y.CH}).reduce((G,k)=>(G[k]=S.getPropertyValue(`--${k}`),G),{}))},[V]),w}}),"./packages/charts/src/constants/colors.ts":((B,f,s)=>{s.d(f,{CH:()=>m,Zb:()=>P,_7:()=>y,hg:()=>l,uy:()=>x});var n=s("./node_modules/.pnpm/@snack-uikit+figma-tokens@18.0.1/node_modules/@snack-uikit/figma-tokens/build/ts/styles-theme-variables.js");const x="interactive-chart-wrapper",l={Green1:"green1",Blue1:"blue1",Violet1:"violet1",Crimson1:"crimson1",Green2:"green2",Blue2:"blue2",Violet2:"violet2",Crimson2:"crimson2",Green3:"green3",Blue3:"blue3",Violet3:"violet3",Crimson3:"crimson3",Green4:"green4",Blue4:"blue4",Violet4:"violet4",Crimson4:"crimson4"},y={[l.Green1]:n.G.sys.green.accentDefault,[l.Green2]:n.G.sys.green.textLight,[l.Green3]:n.G.sys.green.textDisabled,[l.Green4]:n.G.sys.green.decorActivated,[l.Blue1]:n.G.sys.blue.accentDefault,[l.Blue2]:n.G.sys.blue.textLight,[l.Blue3]:n.G.sys.blue.textDisabled,[l.Blue4]:n.G.sys.blue.decorActivated,[l.Violet1]:n.G.sys.violet.accentDefault,[l.Violet2]:n.G.sys.violet.textLight,[l.Violet3]:n.G.sys.violet.textDisabled,[l.Violet4]:n.G.sys.violet.decorActivated,[l.Crimson1]:n.G.sys.pink.accentDefault,[l.Crimson2]:n.G.sys.pink.textLight,[l.Crimson3]:n.G.sys.pink.textDisabled,[l.Crimson4]:n.G.sys.pink.decorActivated},m={ShadowColor:"shadowColor",LineColor:"lineColor",TooltipBackgroundColor:"tooltipBackgroundColor",TooltipColor:"tooltipColor",ColumnHighlightColor:"columnHighlightColor",AxisColor:"axisColor",LabelColor:"labelColor"},P={[m.ShadowColor]:n.G.sys.neutral.accentDefault,[m.LineColor]:n.G.sys.neutral.onAccent,[m.TooltipBackgroundColor]:n.G.sys.invertNeutral.background,[m.TooltipColor]:n.G.sys.invertNeutral.textMain,[m.ColumnHighlightColor]:n.G.sys.neutral.decorDefault,[m.AxisColor]:n.G.sys.neutral.decorDefault,[m.LabelColor]:n.G.sys.neutral.textSupport}}),"./packages/utils/src/hooks/useTheme.ts":((B,f,s)=>{s.d(f,{D:()=>P});var n=s("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),x=s("./node_modules/.pnpm/@snack-uikit+utils@3.5.0_react@18.2.0/node_modules/@snack-uikit/utils/dist/esm/utils/isBrowser.js"),l=s("./packages/utils/src/constants/environment.ts"),y=s("./packages/utils/src/helpers/tryParseJson.ts"),m=s("./packages/utils/src/hooks/private/getCustomStore.ts");const P=()=>{const V=(0,m.H)(),[w,K]=(0,n.useState)(V.theme||l.q.THEME);(0,n.useEffect)(()=>{const S=G=>{const k=(0,y.B)(G.data);k.key===l.f.changeThemeDone&&K(k.value)};return window.addEventListener("message",S,!1),()=>window.removeEventListener("message",S,!1)},[]);const j=(0,n.useCallback)(S=>{(0,x.B)()&&window.postMessage(JSON.stringify({key:l.f.changeTheme,value:S}),location.origin)},[]);return{theme:w,changeTheme:j}}})}]);})();
